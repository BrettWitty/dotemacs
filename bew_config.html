<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Brett Witty's Emacs configuration</title>
<!-- 2014-08-05 Tue 19:29 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Brett Witty" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Brett Witty's Emacs configuration</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Configuration</a></li>
<li><a href="#sec-2">2. About me</a>
<ul>
<li><a href="#sec-2-1">2.1. Personal information</a></li>
</ul>
</li>
<li><a href="#sec-3">3. Startup</a>
<ul>
<li><a href="#sec-3-1">3.1. Add my emacs directories</a></li>
<li><a href="#sec-3-2">3.2. Start up configuration</a></li>
<li><a href="#sec-3-3">3.3. Emacs customize</a></li>
</ul>
</li>
<li><a href="#sec-4">4. Global configuration</a>
<ul>
<li><a href="#sec-4-1">4.1. BrettW custom settings</a></li>
<li><a href="#sec-4-2">4.2. Global mode</a></li>
<li><a href="#sec-4-3">4.3. Packages</a></li>
<li><a href="#sec-4-4">4.4. Coding systems</a></li>
<li><a href="#sec-4-5">4.5. Display options</a>
<ul>
<li><a href="#sec-4-5-1">4.5.1. Color theme</a></li>
<li><a href="#sec-4-5-2">4.5.2. Window decorations</a></li>
<li><a href="#sec-4-5-3">4.5.3. Snappier updates</a></li>
</ul>
</li>
<li><a href="#sec-4-6">4.6. Input</a>
<ul>
<li><a href="#sec-4-6-1">4.6.1. Clipboard</a></li>
<li><a href="#sec-4-6-2">4.6.2. Parentheses</a></li>
<li><a href="#sec-4-6-3">4.6.3. Keyboard settings</a></li>
<li><a href="#sec-4-6-4">4.6.4. Mouse settings</a></li>
</ul>
</li>
<li><a href="#sec-4-7">4.7. Backups</a></li>
<li><a href="#sec-4-8">4.8. Recent files</a></li>
<li><a href="#sec-4-9">4.9. Help</a></li>
<li><a href="#sec-4-10">4.10. General completion</a></li>
<li><a href="#sec-4-11">4.11. Filename completion</a>
<ul>
<li><a href="#sec-4-11-1">4.11.1. Ignored extensions</a></li>
</ul>
</li>
<li><a href="#sec-4-12">4.12. Miscellaneous editing options</a>
<ul>
<li><a href="#sec-4-12-1">4.12.1. Disabled warnings</a></li>
<li><a href="#sec-4-12-2">4.12.2. Don't kill scratch</a></li>
<li><a href="#sec-4-12-3">4.12.3. Default directory</a></li>
<li><a href="#sec-4-12-4">4.12.4. Change "yes or no" to "y or n"</a></li>
<li><a href="#sec-4-12-5">4.12.5. Feedback</a></li>
</ul>
</li>
<li><a href="#sec-4-13">4.13. Keys</a>
<ul>
<li><a href="#sec-4-13-1">4.13.1. Unbindings</a></li>
<li><a href="#sec-4-13-2">4.13.2. Bindings</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-5">5. Helper functions</a>
<ul>
<li><a href="#sec-5-1">5.1. Byte-compile emacs-lisp files to speed up Emacs loading</a></li>
<li><a href="#sec-5-2">5.2. <code>insert-current-timestamp</code></a></li>
<li><a href="#sec-5-3">5.3. <code>insert-signature</code></a></li>
<li><a href="#sec-5-4">5.4. <code>insert-file-name</code></a></li>
<li><a href="#sec-5-5">5.5. <code>insert-current-directory-name</code></a></li>
<li><a href="#sec-5-6">5.6. <code>rename-file-and-buffer</code></a></li>
<li><a href="#sec-5-7">5.7. <code>reload-buffer</code></a></li>
<li><a href="#sec-5-8">5.8. <code>string-strip-chars</code></a></li>
<li><a href="#sec-5-9">5.9. <code>brettw/resize-window</code></a></li>
<li><a href="#sec-5-10">5.10. <code>brettw/widescreen</code></a>
<ul>
<li><a href="#sec-5-10-1">5.10.1. Startup</a></li>
</ul>
</li>
<li><a href="#sec-5-11">5.11. <code>duplicate-line-or-region</code></a></li>
<li><a href="#sec-5-12">5.12. <code>smart-beginning-of-line</code></a></li>
<li><a href="#sec-5-13">5.13. <code>align-repeat</code></a></li>
</ul>
</li>
<li><a href="#sec-6">6. Text editing</a>
<ul>
<li><a href="#sec-6-1">6.1. General options</a></li>
<li><a href="#sec-6-2">6.2. Spellcheck</a></li>
</ul>
</li>
<li><a href="#sec-7">7. Diary and calendar</a>
<ul>
<li><a href="#sec-7-1">7.1. Diary</a></li>
<li><a href="#sec-7-2">7.2. General settings</a></li>
</ul>
</li>
<li><a href="#sec-8">8. Org</a>
<ul>
<li><a href="#sec-8-1">8.1. Modules</a></li>
<li><a href="#sec-8-2">8.2. General settings</a>
<ul>
<li><a href="#sec-8-2-1">8.2.1. Comments</a></li>
<li><a href="#sec-8-2-2">8.2.2. Faces</a></li>
</ul>
</li>
<li><a href="#sec-8-3">8.3. Functions</a>
<ul>
<li><a href="#sec-8-3-1">8.3.1. Fix broken schedule/deadline markup</a></li>
<li><a href="#sec-8-3-2">8.3.2. Mark a headline done when all its checkboxes are checked</a></li>
<li><a href="#sec-8-3-3">8.3.3. Jump to journal</a></li>
<li><a href="#sec-8-3-4">8.3.4. Evaluate time range</a></li>
</ul>
</li>
<li><a href="#sec-8-4">8.4. Files and directories</a></li>
<li><a href="#sec-8-5">8.5. Global keyboard shortcuts</a></li>
<li><a href="#sec-8-6">8.6. Babel</a>
<ul>
<li><a href="#sec-8-6-1">8.6.1. Languages</a></li>
<li><a href="#sec-8-6-2">8.6.2. Settings</a></li>
</ul>
</li>
<li><a href="#sec-8-7">8.7. Hyperlinks</a>
<ul>
<li><a href="#sec-8-7-1">8.7.1. Settings</a></li>
<li><a href="#sec-8-7-2">8.7.2. Quicklinks</a></li>
</ul>
</li>
<li><a href="#sec-8-8">8.8. Contacts</a></li>
<li><a href="#sec-8-9">8.9. Agenda</a>
<ul>
<li><a href="#sec-8-9-1">8.9.1. Settings</a></li>
<li><a href="#sec-8-9-2">8.9.2. On load up</a></li>
</ul>
</li>
<li><a href="#sec-8-10">8.10. To-do</a>
<ul>
<li><a href="#sec-8-10-1">8.10.1. Settings</a></li>
</ul>
</li>
<li><a href="#sec-8-11">8.11. <code>org2blog</code></a>
<ul>
<li><a href="#sec-8-11-1">8.11.1. Customization</a></li>
</ul>
</li>
<li><a href="#sec-8-12">8.12. <code>org-gamify</code></a></li>
<li><a href="#sec-8-13">8.13. Capture</a></li>
<li><a href="#sec-8-14">8.14. Hooks</a></li>
</ul>
</li>
<li><a href="#sec-9">9. Programming</a>
<ul>
<li><a href="#sec-9-1">9.1. General options</a>
<ul>
<li><a href="#sec-9-1-1">9.1.1. CEDET</a></li>
<li><a href="#sec-9-1-2">9.1.2. Tabs and indents</a></li>
<li><a href="#sec-9-1-3">9.1.3. Compilation</a></li>
<li><a href="#sec-9-1-4">9.1.4. Keys</a></li>
</ul>
</li>
<li><a href="#sec-9-2">9.2. LaTeX</a></li>
<li><a href="#sec-9-3">9.3. Lisp</a></li>
<li><a href="#sec-9-4">9.4. HTML</a></li>
<li><a href="#sec-9-5">9.5. Python</a>
<ul>
<li><a href="#sec-9-5-1">9.5.1. Filenames</a></li>
<li><a href="#sec-9-5-2">9.5.2. Hook</a></li>
</ul>
</li>
<li><a href="#sec-9-6">9.6. C++</a>
<ul>
<li><a href="#sec-9-6-1">9.6.1. Filenames</a></li>
<li><a href="#sec-9-6-2">9.6.2. Style</a></li>
<li><a href="#sec-9-6-3">9.6.3. Hooks</a></li>
</ul>
</li>
<li><a href="#sec-9-7">9.7. Projects</a></li>
<li><a href="#sec-9-8">9.8. Octave</a></li>
<li><a href="#sec-9-9">9.9. The Day After</a></li>
</ul>
</li>
<li><a href="#sec-10">10. Utilities</a>
<ul>
<li><a href="#sec-10-1">10.1. Twitter</a></li>
<li><a href="#sec-10-2">10.2. Webjump</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Configuration</h2>
<div class="outline-text-2" id="text-1">
<p>
This is inspired by Sacha Chua's configuration file.
</p>

<p>
To load this, run <code>(org-babel-load-file "~/bew_config.org")</code>.
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> About me</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> Personal information</h3>
<div class="outline-text-3" id="text-2-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq user-full-name <span style="color: #008000;">"Brett Witty"</span>
      user-mail-address <span style="color: #008000;">"brettwitty@brettwitty.net"</span>)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Startup</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> Add my emacs directories</h3>
<div class="outline-text-3" id="text-3-1">
<p>
These are my standard add-on library paths
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'load-path (expand-file-name <span style="color: #008000;">"~/"</span>))
(add-to-list 'load-path (expand-file-name <span style="color: #008000;">"~/libraries/"</span>))
(add-to-list 'load-path <span style="color: #008000;">"~/elisp"</span>)
(add-to-list 'load-path <span style="color: #008000;">"~/libraries/"</span>)
(<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">color-theme</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> Start up configuration</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Get rid of the startup screen.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq inhibit-startup-screen t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3"><span class="section-number-3">3.3</span> Emacs customize</h3>
<div class="outline-text-3" id="text-3-3">
<p>
It's better to just chuck everything into this file, but sometimes Customize is too easy to use.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq custom-file <span style="color: #008000;">"~/bew_custom.el"</span>)
(load-file custom-file)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Global configuration</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> BrettW custom settings</h3>
<div class="outline-text-3" id="text-4-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defvar</span> <span style="color: #BA36A5;">brettw/default-screen-width</span> 120)
(<span style="color: #0000FF;">defvar</span> <span style="color: #BA36A5;">brettw/default-screen-height</span> 70)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> Global mode</h3>
<div class="outline-text-3" id="text-4-2">
<p>
We like these global modes.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-font-lock-mode t)
(delete-selection-mode t)
(auto-compression-mode t)
(display-time-mode t)
(line-number-mode t)
(show-paren-mode t)
(transient-mark-mode t)
(recentf-mode t)
(global-ede-mode t)
(hl-line-mode t)
(ido-mode t)
</pre>
</div>

<p>
YASnippet needs some of its own customization.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">yasnippet</span>)
<span style="color: #8D8D84; font-style: italic;">;</span><span style="color: #8D8D84; font-style: italic;">(setq yas/snippet-dirs '("~/snippets" "~/libraries/yasnippet/snippets/" ))</span>
(yas/global-mode 1)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-3" class="outline-3">
<h3 id="sec-4-3"><span class="section-number-3">4.3</span> Packages</h3>
<div class="outline-text-3" id="text-4-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'package-archives
  '(<span style="color: #008000;">"melpa"</span> . <span style="color: #008000;">"http://melpa.milkbox.net/packages/"</span>) t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-4" class="outline-3">
<h3 id="sec-4-4"><span class="section-number-3">4.4</span> Coding systems</h3>
<div class="outline-text-3" id="text-4-4">
<p>
We only like UTF-8 because the alternatives are rubbish.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(prefer-coding-system 'utf-8)
(setq coding-system-for-read 'utf-8
      coding-system-for-write 'utf-8)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-5" class="outline-3">
<h3 id="sec-4-5"><span class="section-number-3">4.5</span> Display options</h3>
<div class="outline-text-3" id="text-4-5">
</div><div id="outline-container-sec-4-5-1" class="outline-4">
<h4 id="sec-4-5-1"><span class="section-number-4">4.5.1</span> Color theme</h4>
<div class="outline-text-4" id="text-4-5-1">
<p>
Use my custom color theme.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #8D8D84; font-style: italic;">;;</span><span style="color: #8D8D84; font-style: italic;">(load-theme 'tangotango t)</span>
(load-theme 'leuven t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-5-2" class="outline-4">
<h4 id="sec-4-5-2"><span class="section-number-4">4.5.2</span> Window decorations</h4>
<div class="outline-text-4" id="text-4-5-2">
<p>
Set the window up how we like it.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq-default cursor-type 'bar)

(setq scroll-bar-mode 'right
      use-dialog-box nil
        use-file-dialog nil
        cursor-type 'bar
  )
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-5-3" class="outline-4">
<h4 id="sec-4-5-3"><span class="section-number-4">4.5.3</span> Snappier updates</h4>
<div class="outline-text-4" id="text-4-5-3">
<p>
This hack apparently makes things snappier.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq redisplay-dont-pause 1)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-4-6" class="outline-3">
<h3 id="sec-4-6"><span class="section-number-3">4.6</span> Input</h3>
<div class="outline-text-3" id="text-4-6">
</div><div id="outline-container-sec-4-6-1" class="outline-4">
<h4 id="sec-4-6-1"><span class="section-number-4">4.6.1</span> Clipboard</h4>
<div class="outline-text-4" id="text-4-6-1">
<p>
Let Emacs play with the clipboard.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq x-select-enable-clipboard t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-6-2" class="outline-4">
<h4 id="sec-4-6-2"><span class="section-number-4">4.6.2</span> Parentheses</h4>
<div class="outline-text-4" id="text-4-6-2">
<p>
Use the shiny autopair module.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">autopair</span>)
(autopair-global-mode 1)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-6-3" class="outline-4">
<h4 id="sec-4-6-3"><span class="section-number-4">4.6.3</span> Keyboard settings</h4>
<div class="outline-text-4" id="text-4-6-3">
<p>
I'd like these Windows keys to work, but they don't.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(w32-register-hot-key [A-tab])
(w32-register-hot-key [s-o])
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-6-4" class="outline-4">
<h4 id="sec-4-6-4"><span class="section-number-4">4.6.4</span> Mouse settings</h4>
<div class="outline-text-4" id="text-4-6-4">
<p>
Get the right amount of mouse scrolling.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq mouse-wheel-scroll-amount '(1)
      mouse-wheel-scroll-progressive-speed nil)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-4-7" class="outline-3">
<h3 id="sec-4-7"><span class="section-number-3">4.7</span> Backups</h3>
<div class="outline-text-3" id="text-4-7">
<p>
We want to control and minimize Emacs backups.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq backup-directory-alist `((<span style="color: #008000;">"."</span> . <span style="color: #008000;">"~/backup/"</span>)))
(setq backup-by-copying t
      delete-old-versions t
      kept-new-versions 6
      kept-old-versions 2
      version-control t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-8" class="outline-3">
<h3 id="sec-4-8"><span class="section-number-3">4.8</span> Recent files</h3>
<div class="outline-text-3" id="text-4-8">
<p>
Set up the recent files.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq recentf-menu-path nil
      recentf-menu-title <span style="color: #008000;">"Recent files"</span>
      recentf-max-saved-items 100)

(add-to-list 'recentf-exclude <span style="color: #008000;">"\\.ido\\.last\\'"</span>)
(add-to-list 'recentf-exclude <span style="color: #008000;">".*\\.el\\'"</span>)
(add-to-list 'recentf-exclude <span style="color: #008000;">"archive-contents\\'"</span>)
(add-to-list 'recentf-exclude <span style="color: #008000;">"checksums\\.dat\\'"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-9" class="outline-3">
<h3 id="sec-4-9"><span class="section-number-3">4.9</span> Help</h3>
<div class="outline-text-3" id="text-4-9">
<p>
We customize help just a tad.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq apropos-compact-layout t
      apropos-do-all t
      help-window-select t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-10" class="outline-3">
<h3 id="sec-4-10"><span class="section-number-3">4.10</span> General completion</h3>
<div class="outline-text-3" id="text-4-10">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'minibuffer-exit-hook
          '(<span style="color: #0000FF;">lambda</span> ()
             (<span style="color: #0000FF;">let</span> ((buffer <span style="color: #008000;">"*Completions*"</span>))
               (and (get-buffer buffer)
                    (kill-buffer buffer)))
))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-11" class="outline-3">
<h3 id="sec-4-11"><span class="section-number-3">4.11</span> Filename completion</h3>
<div class="outline-text-3" id="text-4-11">
</div><div id="outline-container-sec-4-11-1" class="outline-4">
<h4 id="sec-4-11-1"><span class="section-number-4">4.11.1</span> Ignored extensions</h4>
<div class="outline-text-4" id="text-4-11-1">
<p>
Ignore these files because we're unlikely to open them in Emacs.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq completion-ignored-extensions
      '(<span style="color: #008000;">".o"</span> <span style="color: #008000;">".elc"</span> <span style="color: #008000;">"~"</span> <span style="color: #008000;">".bin"</span> <span style="color: #008000;">".dvi"</span> <span style="color: #008000;">".toc"</span> <span style="color: #008000;">".aux"</span> <span style="color: #008000;">".ps"</span> <span style="color: #008000;">".blg"</span> <span style="color: #008000;">".bbl"</span> <span style="color: #008000;">".idx"</span> <span style="color: #008000;">".pyc"</span>))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-4-12" class="outline-3">
<h3 id="sec-4-12"><span class="section-number-3">4.12</span> Miscellaneous editing options</h3>
<div class="outline-text-3" id="text-4-12">
</div><div id="outline-container-sec-4-12-1" class="outline-4">
<h4 id="sec-4-12-1"><span class="section-number-4">4.12.1</span> Disabled warnings</h4>
<div class="outline-text-4" id="text-4-12-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(put 'downcase-region 'disabled nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-12-2" class="outline-4">
<h4 id="sec-4-12-2"><span class="section-number-4">4.12.2</span> Don't kill scratch</h4>
<div class="outline-text-4" id="text-4-12-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defadvice</span> <span style="color: #006699;">kill-buffer</span> (around kill-buffer-around-advice activate)
  (<span style="color: #0000FF;">let</span> ((buffer-to-kill (ad-get-arg 0)))
    (<span style="color: #0000FF;">if</span> (equal buffer-to-kill <span style="color: #008000;">"*scratch*"</span>)
        (bury-buffer)
      ad-do-it))
)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-12-3" class="outline-4">
<h4 id="sec-4-12-3"><span class="section-number-4">4.12.3</span> Default directory</h4>
<div class="outline-text-4" id="text-4-12-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq default-directory <span style="color: #008000;">"~/"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-12-4" class="outline-4">
<h4 id="sec-4-12-4"><span class="section-number-4">4.12.4</span> Change "yes or no" to "y or n"</h4>
<div class="outline-text-4" id="text-4-12-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(fset 'yes-or-no-p 'y-or-n-p)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-12-5" class="outline-4">
<h4 id="sec-4-12-5"><span class="section-number-4">4.12.5</span> Feedback</h4>
<div class="outline-text-4" id="text-4-12-5">
<p>
Don't flash at me.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq visible-bell nil)
</pre>
</div>

<p>
Don't truncate lines in the message log.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq message-log-max t)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-4-13" class="outline-3">
<h3 id="sec-4-13"><span class="section-number-3">4.13</span> Keys</h3>
<div class="outline-text-3" id="text-4-13">
</div><div id="outline-container-sec-4-13-1" class="outline-4">
<h4 id="sec-4-13-1"><span class="section-number-4">4.13.1</span> Unbindings</h4>
<div class="outline-text-4" id="text-4-13-1">
<p>
Out of the box, I find these distasteful.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-unset-key (kbd <span style="color: #008000;">"C-x C-n"</span>))
(global-unset-key (kbd <span style="color: #008000;">"C-_"</span>))
(global-unset-key (kbd <span style="color: #008000;">"&lt;C-next&gt;"</span>))
(global-unset-key (kbd <span style="color: #008000;">"&lt;C-previous&gt;"</span>))
(global-unset-key (kbd <span style="color: #008000;">"C-z"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-13-2" class="outline-4">
<h4 id="sec-4-13-2"><span class="section-number-4">4.13.2</span> Bindings</h4>
<div class="outline-text-4" id="text-4-13-2">
<p>
These are globally useful things.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #008000;">"&lt;M-up&gt;"</span>) 'move-text-up)
(global-set-key (kbd <span style="color: #008000;">"&lt;M-down&gt;"</span>) 'move-text-down)

(global-set-key (kbd <span style="color: #008000;">"C-x C-M-f"</span>) 'find-file-at-point)

(global-set-key (kbd <span style="color: #008000;">"&lt;C-kp-add&gt;"</span>) 'text-scale-increase)
(global-set-key (kbd <span style="color: #008000;">"&lt;C-kp-subtract&gt;"</span>) 'text-scale-decrease)

(global-set-key (kbd <span style="color: #008000;">"C-`"</span>) 'brettw/widescreen)
(global-set-key (kbd <span style="color: #008000;">"C-c d"</span>) 'brettw/duplicate-line-or-region)

(global-set-key (kbd <span style="color: #008000;">"&lt;home&gt;"</span>) 'smart-beginning-of-line)
</pre>
</div>

<p>
I use these on Linux systems, but can't on Windows.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #008000;">"&lt;s-up&gt;"</span>) 'windmove-up)
(global-set-key (kbd <span style="color: #008000;">"&lt;s-down&gt;"</span>) 'windmove-down)
(global-set-key (kbd <span style="color: #008000;">"&lt;s-left&gt;"</span>) 'windmove-left)
(global-set-key (kbd <span style="color: #008000;">"&lt;s-right&gt;"</span>) 'windmove-right)
</pre>
</div>


<p>
Run an eshell from anywhere.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #008000;">"C-M-s"</span>) 'eshell)
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Helper functions</h2>
<div class="outline-text-2" id="text-5">
<p>
Here's a bunch of minimal, globally-useful functions.
</p>
</div>

<div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1"><span class="section-number-3">5.1</span> Byte-compile emacs-lisp files to speed up Emacs loading</h3>
<div class="outline-text-3" id="text-5-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">brettw/byte-recompile</span> ()
  (interactive)
  (byte-recompile-directory <span style="color: #008000;">"~/emacs"</span> 0)
)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-2" class="outline-3">
<h3 id="sec-5-2"><span class="section-number-3">5.2</span> <code>insert-current-timestamp</code></h3>
<div class="outline-text-3" id="text-5-2">
<p>
Insert the current timestamp in Year-month-day format.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">insert-current-timestamp</span> ()
  <span style="color: #036A07;">"Spit out the current time in Y-m-d format."</span>
  (interactive)
  (insert (format-time-string <span style="color: #008000;">"%Y-%m-%d"</span>))
)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-3" class="outline-3">
<h3 id="sec-5-3"><span class="section-number-3">5.3</span> <code>insert-signature</code></h3>
<div class="outline-text-3" id="text-5-3">
<p>
Insert a textual signature into a file.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">insert-signature</span> ()
  <span style="color: #036A07;">"Spit out my name, email and current time."</span>
  (interactive)
  (insert <span style="color: #008000;">"-- "</span> user-full-name <span style="color: #008000;">" ("</span> user-mail-address <span style="color: #008000;">")  "</span>)
  (insert-current-timestamp)
)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-4" class="outline-3">
<h3 id="sec-5-4"><span class="section-number-3">5.4</span> <code>insert-file-name</code></h3>
<div class="outline-text-3" id="text-5-4">
<p>
Ask/browse for a filename and insert it into the buffer at the point.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">insert-file-name</span> (file <span style="color: #6434A3;">&amp;optional</span> relativep)
  <span style="color: #036A07;">"Read file name and insert it at point.</span>
<span style="color: #036A07;">With a prefix argument, insert only the non-directory part."</span>
  (interactive <span style="color: #008000;">"fFile: \nP"</span>)
  (<span style="color: #0000FF;">when</span> relativep (setq file (file-name-nondirectory file)))
  (insert file))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-5" class="outline-3">
<h3 id="sec-5-5"><span class="section-number-3">5.5</span> <code>insert-current-directory-name</code></h3>
<div class="outline-text-3" id="text-5-5">
<p>
Insert the name of the current directory.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">insert-current-directory-name</span> ()
  <span style="color: #036A07;">"Insert the name of the current directory."</span>
  (interactive)
  (insert (file-name-directory (buffer-file-name)))
)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-6" class="outline-3">
<h3 id="sec-5-6"><span class="section-number-3">5.6</span> <code>rename-file-and-buffer</code></h3>
<div class="outline-text-3" id="text-5-6">
<p>
I've stolen this from Steve Yegge. It renames the current file and buffer.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">rename-file-and-buffer</span> (new-name)
  <span style="color: #036A07;">"Rename both current buffer and file it's visiting to NEW-NAME."</span>
  (interactive <span style="color: #008000;">"sNew name: "</span>)
  (<span style="color: #0000FF;">let</span> ((name (buffer-name))
        (filename (buffer-file-name)))
    (<span style="color: #0000FF;">if</span> (not filename)
        (message <span style="color: #008000;">"Buffer '%s' is not visiting a file!"</span> name)
      (<span style="color: #0000FF;">if</span> (get-buffer new-name)
          (message <span style="color: #008000;">"A buffer named '%s' already exists!"</span> new-name)
        (<span style="color: #0000FF;">progn</span>
          (rename-file name new-name 1)
          (rename-buffer new-name)
          (set-visited-file-name new-name)
          (set-buffer-modifier-p nil)
          ))))
)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-7" class="outline-3">
<h3 id="sec-5-7"><span class="section-number-3">5.7</span> <code>reload-buffer</code></h3>
<div class="outline-text-3" id="text-5-7">
<p>
This reverts a buffer without confirmation.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">reload-buffer</span> ()
  <span style="color: #036A07;">"revert-buffer without confirmation."</span>
  (interactive)
  (revert-buffer t t))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-8" class="outline-3">
<h3 id="sec-5-8"><span class="section-number-3">5.8</span> <code>string-strip-chars</code></h3>
<div class="outline-text-3" id="text-5-8">
<p>
Take a string and strip out all the characters from a second string.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">string-strip-chars</span> (string strip)
  <span style="color: #036A07;">"Take STRING and remove characters in STRIP."</span>
  (<span style="color: #0000FF;">while</span> (&gt; (length strip) 0)
    (<span style="color: #0000FF;">let</span> ((pos 0))
      (setq pos (string-match (substring strip 0 1) string pos))
      (<span style="color: #0000FF;">while</span> (not (eq pos nil))
        (setq string (concat (substring string 0 pos)
                             (substring string (+ pos 1))))
        (setq pos (string-match (substring strip 0 1) string pos)))
      (setq strip (substring strip 1))))
  string)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-5-9" class="outline-3">
<h3 id="sec-5-9"><span class="section-number-3">5.9</span> <code>brettw/resize-window</code></h3>
<div class="outline-text-3" id="text-5-9">
<p>
This resizes the current window to the "correct" size.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">brettw/resize-window</span> ()
  <span style="color: #036A07;">"Resize the frame to defaults."</span>
  (interactive)
  (<span style="color: #0000FF;">if</span> (window-system)
      (set-frame-size (selected-frame) brettw/default-screen-width brettw/default-screen-height)
    )
  )
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-10" class="outline-3">
<h3 id="sec-5-10"><span class="section-number-3">5.10</span> <code>brettw/widescreen</code></h3>
<div class="outline-text-3" id="text-5-10">
<p>
Resize the current window to double the normal width.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">brettw/widescreen</span> ()
  <span style="color: #036A07;">"Resize the frame to defaults."</span>
  (interactive)
  (<span style="color: #0000FF;">if</span> (= (frame-width) brettw/default-screen-width)
      (<span style="color: #0000FF;">progn</span>
        (set-frame-size (selected-frame) (* 2 brettw/default-screen-width) brettw/default-screen-height)
        (split-window-horizontally)
        )
    (<span style="color: #0000FF;">progn</span> 
      (set-frame-size (selected-frame) brettw/default-screen-width brettw/default-screen-height)
      (delete-other-windows)
      )
    )
  )
</pre>
</div>
</div>


<div id="outline-container-sec-5-10-1" class="outline-4">
<h4 id="sec-5-10-1"><span class="section-number-4">5.10.1</span> Startup</h4>
<div class="outline-text-4" id="text-5-10-1">
<p>
We typically want this during startup, so let's call it now.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(brettw/resize-window)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-5-11" class="outline-3">
<h3 id="sec-5-11"><span class="section-number-3">5.11</span> <code>duplicate-line-or-region</code></h3>
<div class="outline-text-3" id="text-5-11">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">brettw/duplicate-line-or-region</span> (<span style="color: #6434A3;">&amp;optional</span> n)
  <span style="color: #036A07;">"Duplicate current line, or region if active.</span>
<span style="color: #036A07;">With argument N, make N copies.</span>
<span style="color: #036A07;">With negative N, comment out original line and use the absolute value."</span>
  (interactive <span style="color: #008000;">"*p"</span>)
  (<span style="color: #0000FF;">let</span> ((use-region (use-region-p)))
    (<span style="color: #0000FF;">save-excursion</span>
      (<span style="color: #0000FF;">let</span> ((text (<span style="color: #0000FF;">if</span> use-region
                      (buffer-substring (region-beginning) (region-end))
                    (<span style="color: #0000FF;">prog1</span> (thing-at-point 'line)
                      (end-of-line)
                      (<span style="color: #0000FF;">if</span> (&lt; 0 (forward-line 1))
                          (newline))))))
        (<span style="color: #0000FF;">dotimes</span> (i (abs (or n 1)))
          (insert text))))
    (<span style="color: #0000FF;">if</span> use-region nil
      (<span style="color: #0000FF;">let</span> ((pos (- (point) (line-beginning-position))))
        (<span style="color: #0000FF;">if</span> (&gt; 0 n)
            (comment-region (line-beginning-position) (line-end-position)))
        (forward-line 1)
        (forward-char pos)))))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-12" class="outline-3">
<h3 id="sec-5-12"><span class="section-number-3">5.12</span> <code>smart-beginning-of-line</code></h3>
<div class="outline-text-3" id="text-5-12">
<p>
I stole this from <a href="http://stackoverflow.com/a/145359">http://stackoverflow.com/a/145359</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">smart-beginning-of-line</span> ()
  <span style="color: #036A07;">"Move point to first non-whitespace character or beginning-of-line.</span>

<span style="color: #036A07;">Move point to the first non-whitespace character on this line.</span>
<span style="color: #036A07;">If point was already at that position, move point to beginning of line."</span>
  (interactive <span style="color: #008000;">"^"</span>)
  (<span style="color: #0000FF;">let</span> ((oldpos (point)))
    (back-to-indentation)
    (and (= oldpos (point))
         (beginning-of-line))))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-13" class="outline-3">
<h3 id="sec-5-13"><span class="section-number-3">5.13</span> <code>align-repeat</code></h3>
<div class="outline-text-3" id="text-5-13">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">align-repeat</span> (start end regexp)
    <span style="color: #036A07;">"Repeat alignment with respect to </span>
<span style="color: #036A07;">     the given regular expression."</span>
    (interactive <span style="color: #008000;">"r\nsAlign regexp: "</span>)
    (align-regexp start end 
        (concat <span style="color: #008000;">"</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">(</span><span style="color: #008000;">\\s-*</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">)</span><span style="color: #008000;">"</span> regexp) 1 1 t))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> Text editing</h2>
<div class="outline-text-2" id="text-6">
</div><div id="outline-container-sec-6-1" class="outline-3">
<h3 id="sec-6-1"><span class="section-number-3">6.1</span> General options</h3>
<div class="outline-text-3" id="text-6-1">
<p>
Sentences should only have a single space at the end.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq sentence-end-double-space nil)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-6-2" class="outline-3">
<h3 id="sec-6-2"><span class="section-number-3">6.2</span> Spellcheck</h3>
<div class="outline-text-3" id="text-6-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq-default ispell-program-name <span style="color: #008000;">"C:/Program Files (x86)/Aspell/bin/aspell.exe"</span>)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> Diary and calendar</h2>
<div class="outline-text-2" id="text-7">
</div><div id="outline-container-sec-7-1" class="outline-3">
<h3 id="sec-7-1"><span class="section-number-3">7.1</span> Diary</h3>
<div class="outline-text-3" id="text-7-1">
<p>
My diary is at <code>~/diary/main.txt</code>, and anything in the <code>/diary/</code> directory is also diary-related.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq diary-file <span style="color: #008000;">"~/diary/main.txt"</span>)
(add-to-list 'auto-mode-alist `(,(expand-file-name <span style="color: #008000;">"~/org/diary/"</span>) . diary-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-2" class="outline-3">
<h3 id="sec-7-2"><span class="section-number-3">7.2</span> General settings</h3>
<div class="outline-text-3" id="text-7-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq calendar-date-style 'european)

(add-hook 'diary-list-entries-hook 'diary-sort-entries t)
(add-hook 'diary-list-entries-hook 'diary-include-other-diary-files)
(add-hook 'diary-mark-entries-hook 'diary-mark-included-diary-files)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><span class="section-number-2">8</span> Org</h2>
<div class="outline-text-2" id="text-8">
</div><div id="outline-container-sec-8-1" class="outline-3">
<h3 id="sec-8-1"><span class="section-number-3">8.1</span> Modules</h3>
<div class="outline-text-3" id="text-8-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-modules '(
                    org-bibtex
                    org-e-beamer
                    org-expiry
                    org-habit
                    org-info
                    org-interactive-query
                    org-mouse
                    org-toc
                    )
      )
</pre>
</div>

<p>
We require the mighty org-babel module.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">ob</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-2" class="outline-3">
<h3 id="sec-8-2"><span class="section-number-3">8.2</span> General settings</h3>
<div class="outline-text-3" id="text-8-2">
<p>
These are a few miscellaneous settings to make things work how I like them.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-log-into-drawer t
      org-log-states-order-reversed nil
      org-support-shift-select t
      org-tags-sort-function (quote string&lt;)
      org-yank-adjusted-subtrees t
      org-startup-with-inline-images nil
      org-startup-folded nil

      org-export-copy-to-kill-ring nil

      org-refile 'time
      org-log-reschedule 'time

      org-completion-use-ido t

      org-use-speed-commands t
)
</pre>
</div>
</div>

<div id="outline-container-sec-8-2-1" class="outline-4">
<h4 id="sec-8-2-1"><span class="section-number-4">8.2.1</span> Comments</h4>
<div class="outline-text-4" id="text-8-2-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'org-structure-template-alist '(<span style="color: #008000;">"C"</span> <span style="color: #008000;">"#+BEGIN_COMMENT\n\n#+END_COMMENT"</span> <span style="color: #008000;">"&lt;!--\n\n--&gt;"</span>))
</pre>
</div>
</div>
</div>


<div id="outline-container-sec-8-2-2" class="outline-4">
<h4 id="sec-8-2-2"><span class="section-number-4">8.2.2</span> Faces</h4>
<div class="outline-text-4" id="text-8-2-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">eval-after-load</span> 'org-faces
 '(<span style="color: #0000FF;">progn</span>
    (<span style="color: #0000FF;">defcustom</span> <span style="color: #BA36A5;">org-todo-keyword-faces</span> nil
      <span style="color: #036A07;">"Faces for specific TODO keywords.</span>
<span style="color: #036A07;">This is a list of cons cells, with TODO keywords in the car and</span>
<span style="color: #036A07;">faces in the cdr.  The face can be a symbol, a color, or a</span>
<span style="color: #036A07;">property list of attributes, like (:foreground \"blue\" :weight</span>
<span style="color: #036A07;">bold :underline t)."</span>
      <span style="color: #006FE0;">:group</span> 'org-faces
      <span style="color: #006FE0;">:group</span> 'org-todo
      <span style="color: #006FE0;">:type</span> '(repeat
              (cons
               (string <span style="color: #006FE0;">:tag</span> <span style="color: #008000;">"Keyword"</span>)
               (choice color (sexp <span style="color: #006FE0;">:tag</span> <span style="color: #008000;">"Face"</span>)))))))

(<span style="color: #0000FF;">eval-after-load</span> 'org
 '(<span style="color: #0000FF;">progn</span>
    (<span style="color: #0000FF;">defun</span> <span style="color: #006699;">org-get-todo-face-from-color</span> (color)
      <span style="color: #036A07;">"Returns a specification for a face that inherits from org-todo</span>
<span style="color: #036A07;"> face and has the given color as foreground. Returns nil if</span>
<span style="color: #036A07;"> color is nil."</span>
      (<span style="color: #0000FF;">when</span> color
        `(<span style="color: #006FE0;">:inherit</span> org-warning <span style="color: #006FE0;">:foreground</span> ,color)))

    (<span style="color: #0000FF;">defun</span> <span style="color: #006699;">org-get-todo-face</span> (kwd)
      <span style="color: #036A07;">"Get the right face for a TODO keyword KWD.</span>
<span style="color: #036A07;">If KWD is a number, get the corresponding match group."</span>
      (<span style="color: #0000FF;">if</span> (numberp kwd) (setq kwd (match-string kwd)))
      (or (<span style="color: #0000FF;">let</span> ((face (cdr (assoc kwd org-todo-keyword-faces))))
            (<span style="color: #0000FF;">if</span> (stringp face)
                (org-get-todo-face-from-color face)
              face))
          (and (member kwd org-done-keywords) 'org-done)
          'org-todo))))
</pre>
</div>

<p>
Now the actual settings:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-todo-keyword-faces
      '((<span style="color: #008000;">"STARTED"</span> . <span style="color: #008000;">"dark orange"</span>)
        (<span style="color: #008000;">"WAITING"</span> . <span style="color: #008000;">"red4"</span>)
        (<span style="color: #008000;">"CANCELLED"</span> . <span style="color: #008000;">"saddle brown"</span>))
)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-8-3" class="outline-3">
<h3 id="sec-8-3"><span class="section-number-3">8.3</span> Functions</h3>
<div class="outline-text-3" id="text-8-3">
<p>
Many of these functions are taken from <a href="http://orgmode.org/worg/index.html">Worg</a>.
</p>
</div>

<div id="outline-container-sec-8-3-1" class="outline-4">
<h4 id="sec-8-3-1"><span class="section-number-4">8.3.1</span> Fix broken schedule/deadline markup</h4>
<div class="outline-text-4" id="text-8-3-1">
<p>
This will repair broken SCHEDULED and DEADLINE markup.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">org-check-misformatted-subtree</span> ()
  <span style="color: #036A07;">"Check misformatted entries in the current buffer."</span>
  (interactive)
  (show-all)
  (org-map-entries
   (<span style="color: #0000FF;">lambda</span> ()
     (<span style="color: #0000FF;">when</span> (and (move-beginning-of-line 2)
                (not (looking-at org-heading-regexp)))
       (<span style="color: #0000FF;">if</span> (or (and (org-get-scheduled-time (point))
                    (not (looking-at (concat <span style="color: #008000;">"^.*"</span> org-scheduled-regexp))))
               (and (org-get-deadline-time (point))
                    (not (looking-at (concat <span style="color: #008000;">"^.*"</span> org-deadline-regexp)))))
           (<span style="color: #0000FF;">when</span> (y-or-n-p <span style="color: #008000;">"Fix this subtree? "</span>)
             (message <span style="color: #008000;">"Call the function again when you're done fixing this subtree."</span>)
             (recursive-edit))
         (message <span style="color: #008000;">"All subtrees checked."</span>))))))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-3-2" class="outline-4">
<h4 id="sec-8-3-2"><span class="section-number-4">8.3.2</span> Mark a headline done when all its checkboxes are checked</h4>
<div class="outline-text-4" id="text-8-3-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">eval-after-load</span> 'org-list
  '(add-hook 'org-checkbox-statistics-hook (function brettw/checkbox-list-complete)))

(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">brettw/checkbox-list-complete</span> ()
  (<span style="color: #0000FF;">save-excursion</span>
    (org-back-to-heading t)
    (<span style="color: #0000FF;">let</span> ((beg (point)) end)
      (end-of-line)
      (setq end (point))
      (goto-char beg)
      (<span style="color: #0000FF;">if</span> (re-search-forward <span style="color: #008000;">"\\[</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">(</span><span style="color: #008000;">[0-9]*%</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">)</span><span style="color: #008000;">\\]</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">|</span><span style="color: #008000;">\\[</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">(</span><span style="color: #008000;">[0-9]*</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">)</span><span style="color: #008000;">/</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">(</span><span style="color: #008000;">[0-9]*</span><span style="color: #008000; font-weight: bold;">\\</span><span style="color: #008000; font-weight: bold;">)</span><span style="color: #008000;">\\]"</span> end t)
            (<span style="color: #0000FF;">if</span> (match-end 1)
                (<span style="color: #0000FF;">if</span> (equal (match-string 1) <span style="color: #008000;">"100%"</span>)
                    <span style="color: #8D8D84; font-style: italic;">;; </span><span style="color: #8D8D84; font-style: italic;">all done - do the state change</span>
                    (org-todo 'done)
                  (org-todo 'todo))
              (<span style="color: #0000FF;">if</span> (and (&gt; (match-end 2) (match-beginning 2))
                       (equal (match-string 2) (match-string 3)))
                  (org-todo 'done)
                (org-todo 'todo)))))))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-3-3" class="outline-4">
<h4 id="sec-8-3-3"><span class="section-number-4">8.3.3</span> Jump to journal</h4>
<div class="outline-text-4" id="text-8-3-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">brettw/jump-to-journal</span> ()
  (interactive)
  (find-file brettw/org-journal-file)
)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-3-4" class="outline-4">
<h4 id="sec-8-3-4"><span class="section-number-4">8.3.4</span> Evaluate time range</h4>
<div class="outline-text-4" id="text-8-3-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">brettw/org-evaluate-time-range</span> (<span style="color: #6434A3;">&amp;optional</span> to-buffer)
  (interactive)
  (<span style="color: #0000FF;">if</span> (org-at-date-range-p t)
      (org-evaluate-time-range to-buffer)
    (<span style="color: #0000FF;">let</span> ((headline (buffer-substring (point-at-bol) (point-at-eol))))
      (<span style="color: #0000FF;">with-temp-buffer</span>
        (insert headline)
        (goto-char (point-at-bol))
        (re-search-forward org-ts-regexp (point-at-eol) t)
        (<span style="color: #0000FF;">if</span> (not (org-at-timestamp-p t))
            (<span style="color: #ff0000; font-weight: bold;">error</span> <span style="color: #008000;">"No timestamp here"</span>))
        (goto-char (match-beginning 0))
        (org-insert-time-stamp (current-time) nil nil)
        (insert <span style="color: #008000;">"--"</span>)
        (org-evaluate-time-range to-buffer)))))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-8-4" class="outline-3">
<h3 id="sec-8-4"><span class="section-number-3">8.4</span> Files and directories</h3>
<div class="outline-text-3" id="text-8-4">
<p>
We typically work out of the <code>~/org/</code> directory for the universal stuff.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-directory <span style="color: #008000;">"~/org"</span>)
(setq brettw/org-journal-file <span style="color: #008000;">"~/org/journal.org"</span>)
(setq org-agenda-files (list <span style="color: #008000;">"~/org/"</span> <span style="color: #008000;">"~/"</span>))
(setq org-default-notes-file (concat org-directory <span style="color: #008000;">"/notes.org"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-5" class="outline-3">
<h3 id="sec-8-5"><span class="section-number-3">8.5</span> Global keyboard shortcuts</h3>
<div class="outline-text-3" id="text-8-5">
<p>
So <code>org-mode</code> can be accessed from anywhere!
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="color: #008000;">"\C-c l"</span>) 'org-store-link)
(global-set-key (kbd <span style="color: #008000;">"\C-c a"</span>) 'org-agenda)
(global-set-key (kbd <span style="color: #008000;">"\C-c b"</span>) 'org-iswitchb)
(global-set-key (kbd <span style="color: #008000;">"\C-c c"</span>) 'org-capture)
(global-set-key (kbd <span style="color: #008000;">"C-M-j"</span>) 'brettw/jump-to-journal)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-6" class="outline-3">
<h3 id="sec-8-6"><span class="section-number-3">8.6</span> Babel</h3>
<div class="outline-text-3" id="text-8-6">
</div><div id="outline-container-sec-8-6-1" class="outline-4">
<h4 id="sec-8-6-1"><span class="section-number-4">8.6.1</span> Languages</h4>
<div class="outline-text-4" id="text-8-6-1">
<p>
We'll usually only work on my favourite languages.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(org-babel-do-load-languages
 'org-babel-load-languages
 '(
   (C . t)
   (dot . t)
   (emacs-lisp . t)
   (latex . t)
   (python . t)
   (sh . t)
   )
)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-6-2" class="outline-4">
<h4 id="sec-8-6-2"><span class="section-number-4">8.6.2</span> Settings</h4>
<div class="outline-text-4" id="text-8-6-2">
<p>
I'd prefer zero indentation.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-edit-src-content-indentation 0)
</pre>
</div>

<p>
I also like to live dangerously (don't ask me if I want to evaluate org-babel code)
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-confirm-babel-evaluate nil)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-8-7" class="outline-3">
<h3 id="sec-8-7"><span class="section-number-3">8.7</span> Hyperlinks</h3>
<div class="outline-text-3" id="text-8-7">
</div><div id="outline-container-sec-8-7-1" class="outline-4">
<h4 id="sec-8-7-1"><span class="section-number-4">8.7.1</span> Settings</h4>
<div class="outline-text-4" id="text-8-7-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-return-follows-link t
      org-tab-follows-link t)

(setq org-link-frame-setup '((vm . vm-visit-folder-other-frame)
                             (vm-imap . vm-visit-imap-folder-other-frame)
                             (gnus . org-gnus-no-new-news)
                             (file . find-file)
                             (wl . wl-other-frame))
)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-7-2" class="outline-4">
<h4 id="sec-8-7-2"><a id="ID-23a1353e-326a-49d3-93d3-8f2a127d5871" name="ID-23a1353e-326a-49d3-93d3-8f2a127d5871"></a><span class="section-number-4">8.7.2</span> Quicklinks</h4>
<div class="outline-text-4" id="text-8-7-2">

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-link-abbrev-alist
      '(
        (<span style="color: #008000;">"wikipedia"</span> . <span style="color: #008000;">"http://en.wikipedia.org/index.php?search=%h"</span>)
        (<span style="color: #008000;">"contact"</span> . <span style="color: #008000;">"file:~/org/contacts.org::%s"</span>)
        )
)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-8-8" class="outline-3">
<h3 id="sec-8-8"><span class="section-number-3">8.8</span> Contacts</h3>
<div class="outline-text-3" id="text-8-8">
<div class="org-src-container">

<pre class="src src-emacs-lisp"><span style="color: #8D8D84; font-style: italic;">;  </span><span style="color: #8D8D84; font-style: italic;">(require 'org-contacts)</span>
<span style="color: #8D8D84; font-style: italic;">;  </span><span style="color: #8D8D84; font-style: italic;">(add-to-list 'org-contacts-files (expand-file-name "~/org/contacts.org"))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-9" class="outline-3">
<h3 id="sec-8-9"><span class="section-number-3">8.9</span> Agenda</h3>
<div class="outline-text-3" id="text-8-9">
</div><div id="outline-container-sec-8-9-1" class="outline-4">
<h4 id="sec-8-9-1"><span class="section-number-4">8.9.1</span> Settings</h4>
<div class="outline-text-4" id="text-8-9-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-agenda-skip-unavailable-files t
      org-include-diary t
      org-agenda-align-tags-to-column -100
      org-agenda-skip-additional-timestamps-same-entry nil
      org-agenda-skip-scheduled-if-done t
)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-9-2" class="outline-4">
<h4 id="sec-8-9-2"><span class="section-number-4">8.9.2</span> On load up</h4>
<div class="outline-text-4" id="text-8-9-2">
<p>
Show the agenda straight after Emacs initialization.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'after-init-hook 'org-agenda-to-appt)
(add-hook 'after-init-hook 'org-agenda-list)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-8-10" class="outline-3">
<h3 id="sec-8-10"><span class="section-number-3">8.10</span> To-do</h3>
<div class="outline-text-3" id="text-8-10">
</div><div id="outline-container-sec-8-10-1" class="outline-4">
<h4 id="sec-8-10-1"><span class="section-number-4">8.10.1</span> Settings</h4>
<div class="outline-text-4" id="text-8-10-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-enforce-todo-checkbox-dependencies t
      org-enforce-todo-dependencies t
      org-log-done t)
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-todo-keywords (list <span style="color: #008000;">"REWARD(r)"</span> <span style="color: #008000;">"TODO(t)"</span> <span style="color: #008000;">"STARTED(s)"</span> <span style="color: #008000;">"WAITING(w!)"</span> <span style="color: #008000;">"|"</span> <span style="color: #008000;">"DONE(d)"</span> <span style="color: #008000;">"CANCELLED(c@)"</span>))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-8-11" class="outline-3">
<h3 id="sec-8-11"><span class="section-number-3">8.11</span> <code>org2blog</code></h3>
<div class="outline-text-3" id="text-8-11">
<p>
Make sure we autoload the required stuff.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">org2blog-autoloads</span>)
</pre>
</div>
</div>

<div id="outline-container-sec-8-11-1" class="outline-4">
<h4 id="sec-8-11-1"><span class="section-number-4">8.11.1</span> Customization</h4>
<div class="outline-text-4" id="text-8-11-1">
<p>
We want to make sure before we post anything.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org2blog/wp-confirm-post t)
</pre>
</div>

<p>
I don't like how it strips newlines.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org2blog/wp-keep-new-lines t)
</pre>
</div>

<p>
Set the source code syntax.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org2blog/wp-use-sourcecode-shortcode t)
(setq org2blog/wp-sourcecode-default-params <span style="color: #008000;">""</span>)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-8-12" class="outline-3">
<h3 id="sec-8-12"><span class="section-number-3">8.12</span> <code>org-gamify</code></h3>
<div class="outline-text-3" id="text-8-12">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'load-path (expand-file-name <span style="color: #008000;">"~/libraries/org-gamify/"</span>) )
(<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">org-gamify</span>)

(define-gamify-currency gold
         <span style="color: #006FE0;">:name</span> <span style="color: #008000;">"gold"</span>
         <span style="color: #006FE0;">:category</span> <span style="color: #008000;">"Money"</span>
         <span style="color: #006FE0;">:min</span> 0 <span style="color: #006FE0;">:enforce-min</span> block)

(define-gamify-currency karma
  <span style="color: #006FE0;">:name</span> <span style="color: #008000;">"karma"</span>
  <span style="color: #006FE0;">:category</span> <span style="color: #008000;">"Experience"</span>
  <span style="color: #006FE0;">:min</span> 0 <span style="color: #006FE0;">:enforce-min</span> truncate)

(define-gamify-currency xp
  <span style="color: #006FE0;">:name</span> <span style="color: #008000;">"XP"</span>
  <span style="color: #006FE0;">:category</span> <span style="color: #008000;">"Experience"</span>
  <span style="color: #006FE0;">:min</span> 0 <span style="color: #006FE0;">:enforce-min</span> truncate)

<span style="color: #8D8D84; font-style: italic;">; </span><span style="color: #8D8D84; font-style: italic;">Add to agenda</span>
(push '(<span style="color: #008000;">"r"</span> <span style="color: #008000;">"Rewards"</span>
        todo <span style="color: #008000;">"REWARD"</span>
        ((org-agenda-time-grid nil)
         (org-agenda-dim-blocked-tasks 'invisible)
         (org-agenda-todo-ignore-scheduled nil)
         (org-agenda-todo-ignore-deadlines nil)
         ))
      org-agenda-custom-commands)
</pre>
</div>
</div>
</div>


<div id="outline-container-sec-8-13" class="outline-3">
<h3 id="sec-8-13"><span class="section-number-3">8.13</span> Capture</h3>
<div class="outline-text-3" id="text-8-13">
<p>
I capture bugs, todo and dev journal entries for my main project.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-capture-templates
      '(
        (<span style="color: #008000;">"t"</span> <span style="color: #008000;">"To-Do"</span> entry (file <span style="color: #008000;">"~/org/todo.org"</span>)
         <span style="color: #008000;">"* TODO %?%i %^g\nDEADLINE: %^t\n%t \n\n"</span> <span style="color: #006FE0;">:empty-lines</span> 1)
        (<span style="color: #008000;">"T"</span> <span style="color: #008000;">"TDA To-Do"</span> entry (file <span style="color: #008000;">"e:/Projects/theDayAfter/doc/org/todo.org"</span>)
         <span style="color: #008000;">"* TODO %i%? :tda:\n%t\n"</span> <span style="color: #006FE0;">:empty-lines</span> 1)
        (<span style="color: #008000;">"B"</span> <span style="color: #008000;">"TDA Bug"</span> entry (file <span style="color: #008000;">"e:/Projects/theDayAfter/doc/org/bugs.org"</span>)
         (file <span style="color: #008000;">"~/org/template/tdabug.org"</span>) <span style="color: #006FE0;">:empty-lines</span> 1)
        (<span style="color: #008000;">"J"</span> <span style="color: #008000;">"TDA Dev Journal"</span> entry (file+datetree <span style="color: #008000;">"e:/Projects/thedayafter/doc/org/devjournal.org"</span>)
         <span style="color: #008000;">"* %i%? :tda:\n%t\n"</span> <span style="color: #006FE0;">:empty-lines</span> 1)
        (<span style="color: #008000;">"m"</span> <span style="color: #008000;">"Meeting"</span> entry (file+datetree+prompt <span style="color: #008000;">"~/org/meetings.org"</span>)
         <span style="color: #008000;">"* %?\n %^T\n"</span> <span style="color: #006FE0;">:empty-lines</span> 1)
        (<span style="color: #008000;">"s"</span> <span style="color: #008000;">"Spark"</span> entry (file <span style="color: #008000;">"~/org/spark.org"</span>)
         <span style="color: #008000;">"* %? %^g\n%u %i\n\n"</span>)
        )
)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-14" class="outline-3">
<h3 id="sec-8-14"><span class="section-number-3">8.14</span> Hooks</h3>
<div class="outline-text-3" id="text-8-14">
<p>
Global org hooks
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">  (<span style="color: #0000FF;">defun</span> <span style="color: #006699;">brettw/my-org-mode-hook</span> ()
    (local-set-key (kbd <span style="color: #008000;">"\M-n"</span>) 'outline-next-visible-heading)
    (local-set-key (kbd <span style="color: #008000;">"\M-p"</span>) 'outline-previous-visible-heading)
    (visual-line-mode)
  )

(add-hook 'org-mode-hook 'brettw/my-org-mode-hook)
</pre>
</div>

<p>
Specific org-list hooks:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">eval-after-load</span> 'org-list
  '(add-hook 'org-checkbox-statistics-hook (function brettw/checkbox-list-complete)))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9"><span class="section-number-2">9</span> Programming</h2>
<div class="outline-text-2" id="text-9">
</div><div id="outline-container-sec-9-1" class="outline-3">
<h3 id="sec-9-1"><span class="section-number-3">9.1</span> General options</h3>
<div class="outline-text-3" id="text-9-1">
</div><div id="outline-container-sec-9-1-1" class="outline-4">
<h4 id="sec-9-1-1"><span class="section-number-4">9.1.1</span> CEDET</h4>
<div class="outline-text-4" id="text-9-1-1">
<p>
Basic CEDET setup (based on the new 23.2+ merged CEDET/Emacs setup).
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">cedet</span>)
(<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">semantic/sb</span>)
(semantic-mode 1)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-9-1-2" class="outline-4">
<h4 id="sec-9-1-2"><span class="section-number-4">9.1.2</span> Tabs and indents</h4>
<div class="outline-text-4" id="text-9-1-2">
<p>
Tab width is always, always, always 4, and indents are only spaces.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq tab-width 4)
(set-default 'indent-tabs-mode nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-9-1-3" class="outline-4">
<h4 id="sec-9-1-3"><span class="section-number-4">9.1.3</span> Compilation</h4>
<div class="outline-text-4" id="text-9-1-3">
<p>
When a compile finishes correctly, we automatically close the compilation window.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">compilation-exit-autoclose</span> (status code msg)
  <span style="color: #8D8D84; font-style: italic;">;; </span><span style="color: #8D8D84; font-style: italic;">If M-x compile exists with a 0</span>
  (<span style="color: #0000FF;">when</span> (and (eq status 'exit) (zerop code))
    (bury-buffer)
    (delete-window (get-buffer-window (get-buffer <span style="color: #008000;">"*compilation*"</span>))))
  (cons msg code))

(setq compilation-exit-message-function 'compilation-exit-autoclose)

(setq compilation-scroll-output t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-9-1-4" class="outline-4">
<h4 id="sec-9-1-4"><span class="section-number-4">9.1.4</span> Keys</h4>
<div class="outline-text-4" id="text-9-1-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'c-mode-common-hook '( lambda ()
                                 (local-set-key (kbd <span style="color: #008000;">"&lt;S-f5&gt;"</span>) 'compile)
                                 (local-set-key (kbd <span style="color: #008000;">"&lt;f5&gt;"</span>) 'recompile)
                                 (local-set-key (kbd <span style="color: #008000;">"RET"</span>) 'reindent-then-newline-and-indent)
                                 (local-set-key (kbd <span style="color: #008000;">"C-M-o"</span>) 'ff-find-other-file)
                                 (local-set-key (kbd <span style="color: #008000;">"&lt;C-return&gt;"</span>) 'complete-symbol)
))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-9-2" class="outline-3">
<h3 id="sec-9-2"><span class="section-number-3">9.2</span> LaTeX</h3>
<div class="outline-text-3" id="text-9-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(load <span style="color: #008000;">"auctex.el"</span> nil t t)
(add-to-list 'auto-mode-alist '(<span style="color: #008000;">"\\.tex?\\'"</span> . latex-mode))
</pre>
</div>
</div>
</div>


<div id="outline-container-sec-9-3" class="outline-3">
<h3 id="sec-9-3"><span class="section-number-3">9.3</span> Lisp</h3>
</div>
<div id="outline-container-sec-9-4" class="outline-3">
<h3 id="sec-9-4"><span class="section-number-3">9.4</span> HTML</h3>
<div class="outline-text-3" id="text-9-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">web-mode</span>)
(add-to-list 'auto-mode-alist '(<span style="color: #008000;">"\\.html?\\'"</span> . web-mode))
(add-to-list 'auto-mode-alist '(<span style="color: #008000;">"\\.php?\\'"</span> . web-mode))
(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">brettw/web-mode-hook</span> () 
  (local-set-key (kbd <span style="color: #008000;">"RET"</span>) 'newline-and-indent)
)

(add-hook 'web-mode-hook 'brettw/web-mode-hook)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-9-5" class="outline-3">
<h3 id="sec-9-5"><span class="section-number-3">9.5</span> Python</h3>
<div class="outline-text-3" id="text-9-5">
</div><div id="outline-container-sec-9-5-1" class="outline-4">
<h4 id="sec-9-5-1"><span class="section-number-4">9.5.1</span> Filenames</h4>
<div class="outline-text-4" id="text-9-5-1">
<p>
Use python mode for SCons files.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq auto-mode-alist (cons '(<span style="color: #008000;">"SConstruct"</span> . python-mode) auto-mode-alist))
(setq auto-mode-alist (cons '(<span style="color: #008000;">"SConscript"</span> . python-mode) auto-mode-alist))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-9-5-2" class="outline-4">
<h4 id="sec-9-5-2"><span class="section-number-4">9.5.2</span> Hook</h4>
<div class="outline-text-4" id="text-9-5-2">
<p>
When we "compile" in Python, we typically mean to invoke SCons (because we are usually editing SCons files!)
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">brettw/my-python-hook</span> ()
  (setq compile-command <span style="color: #008000;">"scons.py -D"</span>)
  (local-set-key (kbd <span style="color: #008000;">"&lt;S-f5&gt;"</span>) 'compile)
  (local-set-key (kbd <span style="color: #008000;">"&lt;f5&gt;"</span>) 'recompile)
  (local-set-key (kbd <span style="color: #008000;">"RET"</span>) 'newline-and-indent)
  (local-set-key (kbd <span style="color: #008000;">"s-o"</span>) 'ff-find-other-file)
  (local-set-key (kbd <span style="color: #008000;">"&lt;C-return&gt;"</span>) 'complete-symbol)
)

(add-hook 'python-mode-hook 'brettw/my-python-hook)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-9-6" class="outline-3">
<h3 id="sec-9-6"><span class="section-number-3">9.6</span> C++</h3>
<div class="outline-text-3" id="text-9-6">
</div><div id="outline-container-sec-9-6-1" class="outline-4">
<h4 id="sec-9-6-1"><span class="section-number-4">9.6.1</span> Filenames</h4>
<div class="outline-text-4" id="text-9-6-1">
<p>
CUDA is C++, so make Emacs aware of it.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'auto-mode-alist '(<span style="color: #008000;">"\\.cu\\'"</span> . c++-mode))
(add-to-list 'auto-mode-alist '(<span style="color: #008000;">"\\.cuh\\'"</span> . c++-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-9-6-2" class="outline-4">
<h4 id="sec-9-6-2"><span class="section-number-4">9.6.2</span> Style</h4>
<div class="outline-text-4" id="text-9-6-2">
<p>
This is my C/C++ style.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq c-basic-offset 4
      c-doc-comment-style (quote javadoc))

(<span style="color: #0000FF;">defconst</span> <span style="color: #BA36A5;">brettw/my-c-style</span>
  '((c-tab-always-indent         . t)
    (c-hanging-braces-alist      . ((substatement-open after)
                                    (brace-list-open)))
    (c-hanging-colons-alist      . ((member-init-intro before)
                                    (inher-intro)
                                    (case-label after)
                                    (label after)
                                    (access-label after)))
    (c-cleanu-list               . (scope-operator
                                    empty-defun-braces
                                    defun-close-semi))
    (c-offsets-alist             . ((arglist-close . c-lineup-arglist)
                                    (substatement-open . 0)
                                    (case-label        . +)
                                    (block-open        . 0)
                                    (access-label      . -)
                                    (knr-argdecl-intro . -)))
    )
  <span style="color: #036A07;">"BEW C Programming Style"</span>)

(c-add-style <span style="color: #008000;">"brettw"</span> brettw/my-c-style)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-9-6-3" class="outline-4">
<h4 id="sec-9-6-3"><span class="section-number-4">9.6.3</span> Hooks</h4>
<div class="outline-text-4" id="text-9-6-3">
<p>
Set a bunch of my defaults.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">defun</span> <span style="color: #006699;">brettw/my-c-mode-common-hook</span> ()
  (global-set-key (kbd <span style="color: #008000;">"&lt;M-return&gt;"</span>) 'semantic-ia-complete-symbol)
  (c-set-style <span style="color: #008000;">"brettw"</span>)
  (setq compile-command <span style="color: #008000;">"scons.py -D"</span>)
  )

(add-hook 'c-mode-common-hook 'brettw/my-c-mode-common-hook)
(add-hook 'c++-mode-hook 'brettw/my-c-mode-common-hook)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-9-7" class="outline-3">
<h3 id="sec-9-7"><span class="section-number-3">9.7</span> Projects</h3>
<div class="outline-text-3" id="text-9-7">
<p>
I put project-specific settings here (especially <code>semantic-add-system-include</code> settings)
</p>
</div>
</div>

<div id="outline-container-sec-9-8" class="outline-3">
<h3 id="sec-9-8"><span class="section-number-3">9.8</span> Octave</h3>
<div class="outline-text-3" id="text-9-8">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'auto-mode-alist '(<span style="color: #008000;">"\\.m\\'"</span> . octave-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-9-9" class="outline-3">
<h3 id="sec-9-9"><span class="section-number-3">9.9</span> The Day After</h3>
<div class="outline-text-3" id="text-9-9">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">tdascript</span>)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10"><span class="section-number-2">10</span> Utilities</h2>
<div class="outline-text-2" id="text-10">
</div><div id="outline-container-sec-10-1" class="outline-3">
<h3 id="sec-10-1"><span class="section-number-3">10.1</span> Twitter</h3>
<div class="outline-text-3" id="text-10-1">
<p>
<code>twittering-mode</code> is pretty awesome. That'll keep.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq twittering-use-master-password t
      twittering-icon-mode t
      twittering-timer-interval 300
      twittering-use-icon-storage t)
</pre>
</div>
</div>
</div>


<div id="outline-container-sec-10-2" class="outline-3">
<h3 id="sec-10-2"><span class="section-number-3">10.2</span> Webjump</h3>
<div class="outline-text-3" id="text-10-2">
<p>
Webjump is neat and gives us very quick access to search.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(<span style="color: #0000FF;">require</span> '<span style="color: #D0372D;">webjump</span>)

(global-set-key '[f2] 'webjump)
(setq webjump-sites '(
                      (<span style="color: #008000;">"Urban Dictionary"</span> .
                       [simple-query <span style="color: #008000;">"www.urbandictionary.com"</span>
                                     <span style="color: #008000;">"http://www.urbandictionary.com/define.php?term="</span> <span style="color: #008000;">""</span>])
                      (<span style="color: #008000;">"Reddit Search"</span> .
                       [simple-query <span style="color: #008000;">"www.reddit.com"</span>
                                     <span style="color: #008000;">"http://www.reddit.com/search?q="</span> <span style="color: #008000;">""</span>])
                      (<span style="color: #008000;">"Google Image Search"</span> .
                       [simple-query <span style="color: #008000;">"images.google.com"</span> <span style="color: #008000;">"images.google.com/images?hl=en&amp;q="</span> <span style="color: #008000;">""</span>])
                      (<span style="color: #008000;">"Google"</span> .
                       [simple-query <span style="color: #008000;">"google.com"</span> <span style="color: #008000;">"www.google.com.au/search?q="</span> <span style="color: #008000;">""</span>])
                      (<span style="color: #008000;">"StackOverflow"</span> .
                       [simple-query <span style="color: #008000;">"stackoverflow.com"</span> <span style="color: #008000;">"stackoverflow.com/search?q="</span> <span style="color: #008000;">""</span>])
                      (<span style="color: #008000;">"Wikipedia"</span> .
                       [simple-query <span style="color: #008000;">"https://en.wikipedia.org/"</span> <span style="color: #008000;">"https://en.wikipedia.org/wiki/Special:Search/"</span> <span style="color: #008000;">""</span>])

                      )

)
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Brett Witty</p>
<p class="date">Created: 2014-08-05 Tue 19:29</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.3.1 (<a href="http://orgmode.org">Org</a> mode 8.2.7c)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
