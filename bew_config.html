<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Brett Witty's Emacs configuration</title>
<!-- 2014-03-04 Tue 22:19 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Brett Witty" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Brett Witty's Emacs configuration</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Configuration</a></li>
<li><a href="#sec-2">2. About me</a>
<ul>
<li><a href="#sec-2-1">2.1. Personal information</a></li>
</ul>
</li>
<li><a href="#sec-3">3. Startup</a>
<ul>
<li><a href="#sec-3-1">3.1. Add my emacs directories</a></li>
<li><a href="#sec-3-2">3.2. Start up configuration</a></li>
<li><a href="#sec-3-3">3.3. Emacs customize</a></li>
</ul>
</li>
<li><a href="#sec-4">4. Global configuration</a>
<ul>
<li><a href="#sec-4-1">4.1. BrettW custom settings</a></li>
<li><a href="#sec-4-2">4.2. Global mode</a></li>
<li><a href="#sec-4-3">4.3. Packages</a></li>
<li><a href="#sec-4-4">4.4. Coding systems</a></li>
<li><a href="#sec-4-5">4.5. Display options</a>
<ul>
<li><a href="#sec-4-5-1">4.5.1. Color theme</a></li>
<li><a href="#sec-4-5-2">4.5.2. Window decorations</a></li>
<li><a href="#sec-4-5-3">4.5.3. Snappier updates</a></li>
</ul>
</li>
<li><a href="#sec-4-6">4.6. Input</a>
<ul>
<li><a href="#sec-4-6-1">4.6.1. Clipboard</a></li>
<li><a href="#sec-4-6-2">4.6.2. Parentheses</a></li>
<li><a href="#sec-4-6-3">4.6.3. Keyboard settings</a></li>
<li><a href="#sec-4-6-4">4.6.4. Mouse settings</a></li>
</ul>
</li>
<li><a href="#sec-4-7">4.7. Backups</a></li>
<li><a href="#sec-4-8">4.8. Recent files</a></li>
<li><a href="#sec-4-9">4.9. Help</a></li>
<li><a href="#sec-4-10">4.10. General completion</a></li>
<li><a href="#sec-4-11">4.11. Filename completion</a>
<ul>
<li><a href="#sec-4-11-1">4.11.1. Ignored extensions</a></li>
</ul>
</li>
<li><a href="#sec-4-12">4.12. Miscellaneous editing options</a>
<ul>
<li><a href="#sec-4-12-1">4.12.1. Disabled warnings</a></li>
<li><a href="#sec-4-12-2">4.12.2. Don't kill scratch</a></li>
<li><a href="#sec-4-12-3">4.12.3. Default directory</a></li>
<li><a href="#sec-4-12-4">4.12.4. Change "yes or no" to "y or n"</a></li>
<li><a href="#sec-4-12-5">4.12.5. Feedback</a></li>
</ul>
</li>
<li><a href="#sec-4-13">4.13. Keys</a>
<ul>
<li><a href="#sec-4-13-1">4.13.1. Unbindings</a></li>
<li><a href="#sec-4-13-2">4.13.2. Bindings</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-5">5. Helper functions</a>
<ul>
<li><a href="#sec-5-1">5.1. Byte-compile emacs-lisp files to speed up Emacs loading</a></li>
<li><a href="#sec-5-2">5.2. <code>insert-current-timestamp</code></a></li>
<li><a href="#sec-5-3">5.3. <code>insert-signature</code></a></li>
<li><a href="#sec-5-4">5.4. <code>insert-file-name</code></a></li>
<li><a href="#sec-5-5">5.5. <code>insert-current-directory-name</code></a></li>
<li><a href="#sec-5-6">5.6. <code>rename-file-and-buffer</code></a></li>
<li><a href="#sec-5-7">5.7. <code>reload-buffer</code></a></li>
<li><a href="#sec-5-8">5.8. <code>string-strip-chars</code></a></li>
<li><a href="#sec-5-9">5.9. <code>brettw/resize-window</code></a></li>
<li><a href="#sec-5-10">5.10. <code>brettw/widescreen</code></a>
<ul>
<li><a href="#sec-5-10-1">5.10.1. Startup</a></li>
</ul>
</li>
<li><a href="#sec-5-11">5.11. <code>count-words</code></a></li>
<li><a href="#sec-5-12">5.12. <code>duplicate-line-or-region</code></a></li>
<li><a href="#sec-5-13">5.13. <code>smart-beginning-of-line</code></a></li>
</ul>
</li>
<li><a href="#sec-6">6. Text editing</a>
<ul>
<li><a href="#sec-6-1">6.1. General options</a></li>
</ul>
</li>
<li><a href="#sec-7">7. Diary and calendar</a>
<ul>
<li><a href="#sec-7-1">7.1. Diary</a></li>
<li><a href="#sec-7-2">7.2. General settings</a></li>
</ul>
</li>
<li><a href="#sec-8">8. Org</a>
<ul>
<li><a href="#sec-8-1">8.1. Modules</a></li>
<li><a href="#sec-8-2">8.2. General settings</a>
<ul>
<li><a href="#sec-8-2-1">8.2.1. Comments</a></li>
<li><a href="#sec-8-2-2">8.2.2. Faces</a></li>
</ul>
</li>
<li><a href="#sec-8-3">8.3. Functions</a>
<ul>
<li><a href="#sec-8-3-1">8.3.1. Fix broken schedule/deadline markup</a></li>
<li><a href="#sec-8-3-2">8.3.2. Mark a headline done when all its checkboxes are checked</a></li>
<li><a href="#sec-8-3-3">8.3.3. Jump to journal</a></li>
<li><a href="#sec-8-3-4">8.3.4. Evaluate time range</a></li>
</ul>
</li>
<li><a href="#sec-8-4">8.4. Files and directories</a></li>
<li><a href="#sec-8-5">8.5. Global keyboard shortcuts</a></li>
<li><a href="#sec-8-6">8.6. Babel</a>
<ul>
<li><a href="#sec-8-6-1">8.6.1. Languages</a></li>
<li><a href="#sec-8-6-2">8.6.2. Settings</a></li>
</ul>
</li>
<li><a href="#sec-8-7">8.7. Hyperlinks</a>
<ul>
<li><a href="#sec-8-7-1">8.7.1. Settings</a></li>
<li><a href="#sec-8-7-2">8.7.2. Quicklinks</a></li>
</ul>
</li>
<li><a href="#sec-8-8">8.8. Contacts</a></li>
<li><a href="#sec-8-9">8.9. Agenda</a>
<ul>
<li><a href="#sec-8-9-1">8.9.1. Settings</a></li>
<li><a href="#sec-8-9-2">8.9.2. On load up</a></li>
</ul>
</li>
<li><a href="#sec-8-10">8.10. To-do</a>
<ul>
<li><a href="#sec-8-10-1">8.10.1. Settings</a></li>
</ul>
</li>
<li><a href="#sec-8-11">8.11. <code>org2blog</code></a>
<ul>
<li><a href="#sec-8-11-1">8.11.1. Customization</a></li>
</ul>
</li>
<li><a href="#sec-8-12">8.12. Capture</a></li>
<li><a href="#sec-8-13">8.13. Hooks</a></li>
</ul>
</li>
<li><a href="#sec-9">9. Programming</a>
<ul>
<li><a href="#sec-9-1">9.1. General options</a>
<ul>
<li><a href="#sec-9-1-1">9.1.1. CEDET</a></li>
<li><a href="#sec-9-1-2">9.1.2. Tabs and indents</a></li>
<li><a href="#sec-9-1-3">9.1.3. Compilation</a></li>
<li><a href="#sec-9-1-4">9.1.4. Keys</a></li>
</ul>
</li>
<li><a href="#sec-9-2">9.2. Lisp</a></li>
<li><a href="#sec-9-3">9.3. HTML</a></li>
<li><a href="#sec-9-4">9.4. Python</a>
<ul>
<li><a href="#sec-9-4-1">9.4.1. Filenames</a></li>
<li><a href="#sec-9-4-2">9.4.2. Hook</a></li>
</ul>
</li>
<li><a href="#sec-9-5">9.5. C++</a>
<ul>
<li><a href="#sec-9-5-1">9.5.1. Filenames</a></li>
<li><a href="#sec-9-5-2">9.5.2. Style</a></li>
<li><a href="#sec-9-5-3">9.5.3. Hooks</a></li>
</ul>
</li>
<li><a href="#sec-9-6">9.6. Projects</a></li>
</ul>
</li>
<li><a href="#sec-10">10. Utilities</a>
<ul>
<li><a href="#sec-10-1">10.1. Twitter</a></li>
<li><a href="#sec-10-2">10.2. Webjump</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Configuration</h2>
<div class="outline-text-2" id="text-1">
<p>
This is inspired by Sacha Chua's configuration file.
</p>

<p>
To load this, run <code>(org-babel-load-file "~/bew_config.org")</code>.
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> About me</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> Personal information</h3>
<div class="outline-text-3" id="text-2-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq user-full-name "Brett Witty"
      user-mail-address "brettwitty@brettwitty.net")
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Startup</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> Add my emacs directories</h3>
<div class="outline-text-3" id="text-3-1">
<p>
These are my standard add-on library paths
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'load-path (expand-file-name "~/"))
(add-to-list 'load-path (expand-file-name "~/libraries/"))
(add-to-list 'load-path "~/elisp")
(add-to-list 'load-path "~/libraries/")
(require 'color-theme)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> Start up configuration</h3>
<div class="outline-text-3" id="text-3-2">
<p>
Get rid of the startup screen.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq inhibit-startup-screen t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3"><span class="section-number-3">3.3</span> Emacs customize</h3>
<div class="outline-text-3" id="text-3-3">
<p>
It's better to just chuck everything into this file, but sometimes Customize is too easy to use.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq custom-file "~/bew_custom.el")
(load-file custom-file)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Global configuration</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> BrettW custom settings</h3>
<div class="outline-text-3" id="text-4-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defvar brettw/default-screen-width 120)
(defvar brettw/default-screen-height 70)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> Global mode</h3>
<div class="outline-text-3" id="text-4-2">
<p>
We like these global modes.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-font-lock-mode t)
(delete-selection-mode t)
(auto-compression-mode t)
(display-time-mode t)
(line-number-mode t)
(show-paren-mode t)
(transient-mark-mode t)
(recentf-mode t)
(global-ede-mode t)
(ido-mode t)
</pre>
</div>

<p>
YASnippet needs some of its own customization.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(require 'yasnippet)
(setq yas/snippet-dirs '("~/snippets" "~/libraries/yasnippet/snippets/" ))
(yas/global-mode 1)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-3" class="outline-3">
<h3 id="sec-4-3"><span class="section-number-3">4.3</span> Packages</h3>
<div class="outline-text-3" id="text-4-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'package-archives
  '("melpa" . "http://melpa.milkbox.net/packages/") t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-4" class="outline-3">
<h3 id="sec-4-4"><span class="section-number-3">4.4</span> Coding systems</h3>
<div class="outline-text-3" id="text-4-4">
<p>
We only like UTF-8 because the alternatives are rubbish.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(prefer-coding-system 'utf-8)
(setq coding-system-for-read 'utf-8
      coding-system-for-write 'utf-8)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-5" class="outline-3">
<h3 id="sec-4-5"><span class="section-number-3">4.5</span> Display options</h3>
<div class="outline-text-3" id="text-4-5">
</div><div id="outline-container-sec-4-5-1" class="outline-4">
<h4 id="sec-4-5-1"><span class="section-number-4">4.5.1</span> Color theme</h4>
<div class="outline-text-4" id="text-4-5-1">
<p>
Use my custom color theme.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(load-theme 'ample t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-5-2" class="outline-4">
<h4 id="sec-4-5-2"><span class="section-number-4">4.5.2</span> Window decorations</h4>
<div class="outline-text-4" id="text-4-5-2">
<p>
Set the window up how we like it.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq-default cursor-type 'bar)

(setq scroll-bar-mode 'right
      use-dialog-box nil
        use-file-dialog nil
        cursor-type 'bar
  )
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-5-3" class="outline-4">
<h4 id="sec-4-5-3"><span class="section-number-4">4.5.3</span> Snappier updates</h4>
<div class="outline-text-4" id="text-4-5-3">
<p>
This hack apparently makes things snappier.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq redisplay-dont-pause 1)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-4-6" class="outline-3">
<h3 id="sec-4-6"><span class="section-number-3">4.6</span> Input</h3>
<div class="outline-text-3" id="text-4-6">
</div><div id="outline-container-sec-4-6-1" class="outline-4">
<h4 id="sec-4-6-1"><span class="section-number-4">4.6.1</span> Clipboard</h4>
<div class="outline-text-4" id="text-4-6-1">
<p>
Let Emacs play with the clipboard.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq x-select-enable-clipboard t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-6-2" class="outline-4">
<h4 id="sec-4-6-2"><span class="section-number-4">4.6.2</span> Parentheses</h4>
<div class="outline-text-4" id="text-4-6-2">
<p>
Use the shiny autopair module.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(require 'autopair)
(autopair-global-mode 1)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-6-3" class="outline-4">
<h4 id="sec-4-6-3"><span class="section-number-4">4.6.3</span> Keyboard settings</h4>
<div class="outline-text-4" id="text-4-6-3">
<p>
I'd like these Windows keys to work, but they don't.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(w32-register-hot-key [A-tab])
(w32-register-hot-key [s-o])
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-6-4" class="outline-4">
<h4 id="sec-4-6-4"><span class="section-number-4">4.6.4</span> Mouse settings</h4>
<div class="outline-text-4" id="text-4-6-4">
<p>
Get the right amount of mouse scrolling.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq mouse-wheel-scroll-amount '(1)
      mouse-wheel-scroll-progressive-speed nil)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-4-7" class="outline-3">
<h3 id="sec-4-7"><span class="section-number-3">4.7</span> Backups</h3>
<div class="outline-text-3" id="text-4-7">
<p>
We want to control and minimize Emacs backups.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq backup-directory-alist `(("." . "~/backup/")))
(setq backup-by-copying t
      delete-old-versions t
      kept-new-versions 6
      kept-old-versions 2
      version-control t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-8" class="outline-3">
<h3 id="sec-4-8"><span class="section-number-3">4.8</span> Recent files</h3>
<div class="outline-text-3" id="text-4-8">
<p>
Set up the recent files.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq recentf-menu-path nil
      recentf-menu-title "Recent files"
      recentf-max-saved-items 100)

(add-to-list 'recentf-exclude "\\.ido\\.last\\'")
(add-to-list 'recentf-exclude ".*\\.el\\'")
(add-to-list 'recentf-exclude "archive-contents\\'")
(add-to-list 'recentf-exclude "checksums\\.dat\\'")
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-9" class="outline-3">
<h3 id="sec-4-9"><span class="section-number-3">4.9</span> Help</h3>
<div class="outline-text-3" id="text-4-9">
<p>
We customize help just a tad.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq apropos-compact-layout t
      apropos-do-all t
      help-window-select t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-10" class="outline-3">
<h3 id="sec-4-10"><span class="section-number-3">4.10</span> General completion</h3>
<div class="outline-text-3" id="text-4-10">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'minibuffer-exit-hook
          '(lambda ()
             (let ((buffer "*Completions*"))
               (and (get-buffer buffer)
                    (kill-buffer buffer)))
))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-11" class="outline-3">
<h3 id="sec-4-11"><span class="section-number-3">4.11</span> Filename completion</h3>
<div class="outline-text-3" id="text-4-11">
</div><div id="outline-container-sec-4-11-1" class="outline-4">
<h4 id="sec-4-11-1"><span class="section-number-4">4.11.1</span> Ignored extensions</h4>
<div class="outline-text-4" id="text-4-11-1">
<p>
Ignore these files because we're unlikely to open them in Emacs.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq completion-ignored-extensions
      '(".o" ".elc" "~" ".bin" ".dvi" ".toc" ".aux" ".ps" ".blg" ".bbl" ".idx"))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-4-12" class="outline-3">
<h3 id="sec-4-12"><span class="section-number-3">4.12</span> Miscellaneous editing options</h3>
<div class="outline-text-3" id="text-4-12">
</div><div id="outline-container-sec-4-12-1" class="outline-4">
<h4 id="sec-4-12-1"><span class="section-number-4">4.12.1</span> Disabled warnings</h4>
<div class="outline-text-4" id="text-4-12-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(put 'downcase-region 'disabled nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-12-2" class="outline-4">
<h4 id="sec-4-12-2"><span class="section-number-4">4.12.2</span> Don't kill scratch</h4>
<div class="outline-text-4" id="text-4-12-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defadvice kill-buffer (around kill-buffer-around-advice activate)
  (let ((buffer-to-kill (ad-get-arg 0)))
    (if (equal buffer-to-kill "*scratch*")
        (bury-buffer)
      ad-do-it))
)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-12-3" class="outline-4">
<h4 id="sec-4-12-3"><span class="section-number-4">4.12.3</span> Default directory</h4>
<div class="outline-text-4" id="text-4-12-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq default-directory "~/")
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-12-4" class="outline-4">
<h4 id="sec-4-12-4"><span class="section-number-4">4.12.4</span> Change "yes or no" to "y or n"</h4>
<div class="outline-text-4" id="text-4-12-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(fset 'yes-or-no-p 'y-or-n-p)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-12-5" class="outline-4">
<h4 id="sec-4-12-5"><span class="section-number-4">4.12.5</span> Feedback</h4>
<div class="outline-text-4" id="text-4-12-5">
<p>
Don't flash at me.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq visible-bell nil)
</pre>
</div>

<p>
Don't truncate lines in the message log.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq message-log-max t)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-4-13" class="outline-3">
<h3 id="sec-4-13"><span class="section-number-3">4.13</span> Keys</h3>
<div class="outline-text-3" id="text-4-13">
</div><div id="outline-container-sec-4-13-1" class="outline-4">
<h4 id="sec-4-13-1"><span class="section-number-4">4.13.1</span> Unbindings</h4>
<div class="outline-text-4" id="text-4-13-1">
<p>
Out of the box, I find these distasteful.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-unset-key (kbd "C-x C-n"))
(global-unset-key (kbd "C-_"))
(global-unset-key (kbd "&lt;C-next&gt;"))
(global-unset-key (kbd "&lt;C-previous&gt;"))
(global-unset-key (kbd "C-z"))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-4-13-2" class="outline-4">
<h4 id="sec-4-13-2"><span class="section-number-4">4.13.2</span> Bindings</h4>
<div class="outline-text-4" id="text-4-13-2">
<p>
These are globally useful things.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd "C-x C-M-f") 'find-file-at-point)

(global-set-key (kbd "&lt;C-kp-add&gt;") 'text-scale-increase)
(global-set-key (kbd "&lt;C-kp-subtract&gt;") 'text-scale-decrease)

(global-set-key (kbd "C-`") 'brettw/widescreen)
(global-set-key (kbd "C-c d") 'brettw/duplicate-line-or-region)

(global-set-key (kbd "&lt;home&gt;") 'smart-beginning-of-line)
</pre>
</div>

<p>
I use these on Linux systems, but can't on Windows.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd "&lt;s-up&gt;") 'windmove-up)
(global-set-key (kbd "&lt;s-down&gt;") 'windmove-down)
(global-set-key (kbd "&lt;s-left&gt;") 'windmove-left)
(global-set-key (kbd "&lt;s-right&gt;") 'windmove-right)
</pre>
</div>


<p>
Run an eshell from anywhere.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd "C-M-s") 'eshell)
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Helper functions</h2>
<div class="outline-text-2" id="text-5">
<p>
Here's a bunch of minimal, globally-useful functions.
</p>
</div>

<div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1"><span class="section-number-3">5.1</span> Byte-compile emacs-lisp files to speed up Emacs loading</h3>
<div class="outline-text-3" id="text-5-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun brettw/byte-recompile ()
  (interactive)
  (byte-recompile-directory "~/emacs" 0)
)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-2" class="outline-3">
<h3 id="sec-5-2"><span class="section-number-3">5.2</span> <code>insert-current-timestamp</code></h3>
<div class="outline-text-3" id="text-5-2">
<p>
Insert the current timestamp in Year-month-day format.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun insert-current-timestamp ()
  "Spit out the current time in Y-m-d format."
  (interactive)
  (insert (format-time-string "%Y-%m-%d"))
)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-3" class="outline-3">
<h3 id="sec-5-3"><span class="section-number-3">5.3</span> <code>insert-signature</code></h3>
<div class="outline-text-3" id="text-5-3">
<p>
Insert a textual signature into a file.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun insert-signature ()
  "Spit out my name, email and current time."
  (interactive)
  (insert "-- " user-full-name " (" user-mail-address ")  ")
  (insert-current-timestamp)
)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-4" class="outline-3">
<h3 id="sec-5-4"><span class="section-number-3">5.4</span> <code>insert-file-name</code></h3>
<div class="outline-text-3" id="text-5-4">
<p>
Ask/browse for a filename and insert it into the buffer at the point.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun insert-file-name (file &amp;optional relativep)
  "Read file name and insert it at point.
With a prefix argument, insert only the non-directory part."
  (interactive "fFile: \nP")
  (when relativep (setq file (file-name-nondirectory file)))
  (insert file))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-5" class="outline-3">
<h3 id="sec-5-5"><span class="section-number-3">5.5</span> <code>insert-current-directory-name</code></h3>
<div class="outline-text-3" id="text-5-5">
<p>
Insert the name of the current directory.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun insert-current-directory-name ()
  "Insert the name of the current directory."
  (interactive)
  (insert (file-name-directory (buffer-file-name)))
)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-6" class="outline-3">
<h3 id="sec-5-6"><span class="section-number-3">5.6</span> <code>rename-file-and-buffer</code></h3>
<div class="outline-text-3" id="text-5-6">
<p>
I've stolen this from Steve Yegge. It renames the current file and buffer.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun rename-file-and-buffer (new-name)
  "Rename both current buffer and file it's visiting to NEW-NAME."
  (interactive "sNew name: ")
  (let ((name (buffer-name))
        (filename (buffer-file-name)))
    (if (not filename)
        (message "Buffer '%s' is not visiting a file!" name)
      (if (get-buffer new-name)
          (message "A buffer named '%s' already exists!" new-name)
        (progn
          (rename-file name new-name 1)
          (rename-buffer new-name)
          (set-visited-file-name new-name)
          (set-buffer-modifier-p nil)
          ))))
)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-7" class="outline-3">
<h3 id="sec-5-7"><span class="section-number-3">5.7</span> <code>reload-buffer</code></h3>
<div class="outline-text-3" id="text-5-7">
<p>
This reverts a buffer without confirmation.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun reload-buffer ()
  "revert-buffer without confirmation."
  (interactive)
  (revert-buffer t t))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-8" class="outline-3">
<h3 id="sec-5-8"><span class="section-number-3">5.8</span> <code>string-strip-chars</code></h3>
<div class="outline-text-3" id="text-5-8">
<p>
Take a string and strip out all the characters from a second string.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun string-strip-chars (string strip)
  "Take STRING and remove characters in STRIP."
  (while (&gt; (length strip) 0)
    (let ((pos 0))
      (setq pos (string-match (substring strip 0 1) string pos))
      (while (not (eq pos nil))
        (setq string (concat (substring string 0 pos)
                             (substring string (+ pos 1))))
        (setq pos (string-match (substring strip 0 1) string pos)))
      (setq strip (substring strip 1))))
  string)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-5-9" class="outline-3">
<h3 id="sec-5-9"><span class="section-number-3">5.9</span> <code>brettw/resize-window</code></h3>
<div class="outline-text-3" id="text-5-9">
<p>
This resizes the current window to the "correct" size.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun brettw/resize-window ()
  "Resize the frame to defaults."
  (interactive)
  (if (window-system)
      (set-frame-size (selected-frame) brettw/default-screen-width brettw/default-screen-height)
    )
  )
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-10" class="outline-3">
<h3 id="sec-5-10"><span class="section-number-3">5.10</span> <code>brettw/widescreen</code></h3>
<div class="outline-text-3" id="text-5-10">
<p>
Resize the current window to double the normal width.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun brettw/widescreen ()
  "Resize the frame to defaults."
  (interactive)
  (if (= (frame-width) brettw/default-screen-width)
      (progn
        (set-frame-size (selected-frame) (* 2 brettw/default-screen-width) brettw/default-screen-height)
        (split-window-horizontally)
        )
    (progn 
      (set-frame-size (selected-frame) brettw/default-screen-width brettw/default-screen-height)
      (delete-other-windows)
      )
    )
  )
</pre>
</div>
</div>


<div id="outline-container-sec-5-10-1" class="outline-4">
<h4 id="sec-5-10-1"><span class="section-number-4">5.10.1</span> Startup</h4>
<div class="outline-text-4" id="text-5-10-1">
<p>
We typically want this during startup, so let's call it now.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(brettw/resize-window)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-5-11" class="outline-3">
<h3 id="sec-5-11"><span class="section-number-3">5.11</span> <code>count-words</code></h3>
<div class="outline-text-3" id="text-5-11">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun count-words ()
  (interactive)
  (message "%d words"
           (if (use-region-p)
               (how-many "\\&lt;\\w*\\&gt;" (region-beginning) (region-end))
             (how-many "\\&lt;\\w*\\&gt;" (buffer-end -1) (buffer-end 1))
             )
           )
)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-12" class="outline-3">
<h3 id="sec-5-12"><span class="section-number-3">5.12</span> <code>duplicate-line-or-region</code></h3>
<div class="outline-text-3" id="text-5-12">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun brettw/duplicate-line-or-region (&amp;optional n)
  "Duplicate current line, or region if active.
With argument N, make N copies.
With negative N, comment out original line and use the absolute value."
  (interactive "*p")
  (let ((use-region (use-region-p)))
    (save-excursion
      (let ((text (if use-region
                      (buffer-substring (region-beginning) (region-end))
                    (prog1 (thing-at-point 'line)
                      (end-of-line)
                      (if (&lt; 0 (forward-line 1))
                          (newline))))))
        (dotimes (i (abs (or n 1)))
          (insert text))))
    (if use-region nil
      (let ((pos (- (point) (line-beginning-position))))
        (if (&gt; 0 n)
            (comment-region (line-beginning-position) (line-end-position)))
        (forward-line 1)
        (forward-char pos)))))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5-13" class="outline-3">
<h3 id="sec-5-13"><span class="section-number-3">5.13</span> <code>smart-beginning-of-line</code></h3>
<div class="outline-text-3" id="text-5-13">
<p>
I stole this from <a href="http://stackoverflow.com/a/145359">http://stackoverflow.com/a/145359</a>
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun smart-beginning-of-line ()
  "Move point to first non-whitespace character or beginning-of-line.

Move point to the first non-whitespace character on this line.
If point was already at that position, move point to beginning of line."
  (interactive "^")
  (let ((oldpos (point)))
    (back-to-indentation)
    (and (= oldpos (point))
         (beginning-of-line))))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> Text editing</h2>
<div class="outline-text-2" id="text-6">
</div><div id="outline-container-sec-6-1" class="outline-3">
<h3 id="sec-6-1"><span class="section-number-3">6.1</span> General options</h3>
<div class="outline-text-3" id="text-6-1">
<p>
Sentences should only have a single space at the end.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq sentence-end-double-space nil)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> Diary and calendar</h2>
<div class="outline-text-2" id="text-7">
</div><div id="outline-container-sec-7-1" class="outline-3">
<h3 id="sec-7-1"><span class="section-number-3">7.1</span> Diary</h3>
<div class="outline-text-3" id="text-7-1">
<p>
My diary is at <code>~/diary/main.txt</code>, and anything in the <code>/diary/</code> directory is also diary-related.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq diary-file "~/diary/main.txt")
(add-to-list 'auto-mode-alist `(,(expand-file-name "~/org/diary/") . diary-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-7-2" class="outline-3">
<h3 id="sec-7-2"><span class="section-number-3">7.2</span> General settings</h3>
<div class="outline-text-3" id="text-7-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq calendar-date-style 'european)

(add-hook 'diary-list-entries-hook 'diary-sort-entries t)
(add-hook 'diary-list-entries-hook 'diary-include-other-diary-files)
(add-hook 'diary-mark-entries-hook 'diary-mark-included-diary-files)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><span class="section-number-2">8</span> Org</h2>
<div class="outline-text-2" id="text-8">
</div><div id="outline-container-sec-8-1" class="outline-3">
<h3 id="sec-8-1"><span class="section-number-3">8.1</span> Modules</h3>
<div class="outline-text-3" id="text-8-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-modules '(
                    org-bibtex
                    org-e-beamer
                    org-expiry
                    org-habit
                    org-info
                    org-interactive-query
                    org-mouse
                    org-toc
                    )
      )
</pre>
</div>

<p>
We require the mighty org-babel module.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(require 'ob)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-2" class="outline-3">
<h3 id="sec-8-2"><span class="section-number-3">8.2</span> General settings</h3>
<div class="outline-text-3" id="text-8-2">
<p>
These are a few miscellaneous settings to make things work how I like them.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-log-into-drawer t
      org-log-states-order-reversed nil
      org-support-shift-select t
      org-tags-sort-function (quote string&lt;)
      org-yank-adjusted-subtrees t
      org-startup-with-inline-images nil
      org-startup-folded nil

      org-refile 'time
      org-log-reschedule 'time

      org-use-speed-commands t
)
</pre>
</div>
</div>

<div id="outline-container-sec-8-2-1" class="outline-4">
<h4 id="sec-8-2-1"><span class="section-number-4">8.2.1</span> Comments</h4>
<div class="outline-text-4" id="text-8-2-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'org-structure-template-alist '("C" "#+BEGIN_COMMENT\n\n#+END_COMMENT" "&lt;!--\n\n--&gt;"))
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-8-2-2" class="outline-4">
<h4 id="sec-8-2-2"><span class="section-number-4">8.2.2</span> Faces</h4>
<div class="outline-text-4" id="text-8-2-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-load 'org-faces
 '(progn
    (defcustom org-todo-keyword-faces nil
      "Faces for specific TODO keywords.
This is a list of cons cells, with TODO keywords in the car and
faces in the cdr.  The face can be a symbol, a color, or a
property list of attributes, like (:foreground \"blue\" :weight
bold :underline t)."
      :group 'org-faces
      :group 'org-todo
      :type '(repeat
              (cons
               (string :tag "Keyword")
               (choice color (sexp :tag "Face")))))))

(eval-after-load 'org
 '(progn
    (defun org-get-todo-face-from-color (color)
      "Returns a specification for a face that inherits from org-todo
 face and has the given color as foreground. Returns nil if
 color is nil."
      (when color
        `(:inherit org-warning :foreground ,color)))

    (defun org-get-todo-face (kwd)
      "Get the right face for a TODO keyword KWD.
If KWD is a number, get the corresponding match group."
      (if (numberp kwd) (setq kwd (match-string kwd)))
      (or (let ((face (cdr (assoc kwd org-todo-keyword-faces))))
            (if (stringp face)
                (org-get-todo-face-from-color face)
              face))
          (and (member kwd org-done-keywords) 'org-done)
          'org-todo))))
</pre>
</div>

<p>
Now the actual settings:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-todo-keyword-faces
      '(("STARTED" . "dark orange")
        ("WAITING" . "red4")
        ("CANCELLED" . "saddle brown"))
)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-8-3" class="outline-3">
<h3 id="sec-8-3"><span class="section-number-3">8.3</span> Functions</h3>
<div class="outline-text-3" id="text-8-3">
<p>
Many of these functions are taken from <a href="http://orgmode.org/worg/index.html">Worg</a>.
</p>
</div>

<div id="outline-container-sec-8-3-1" class="outline-4">
<h4 id="sec-8-3-1"><span class="section-number-4">8.3.1</span> Fix broken schedule/deadline markup</h4>
<div class="outline-text-4" id="text-8-3-1">
<p>
This will repair broken SCHEDULED and DEADLINE markup.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun org-check-misformatted-subtree ()
  "Check misformatted entries in the current buffer."
  (interactive)
  (show-all)
  (org-map-entries
   (lambda ()
     (when (and (move-beginning-of-line 2)
                (not (looking-at org-heading-regexp)))
       (if (or (and (org-get-scheduled-time (point))
                    (not (looking-at (concat "^.*" org-scheduled-regexp))))
               (and (org-get-deadline-time (point))
                    (not (looking-at (concat "^.*" org-deadline-regexp)))))
           (when (y-or-n-p "Fix this subtree? ")
             (message "Call the function again when you're done fixing this subtree.")
             (recursive-edit))
         (message "All subtrees checked."))))))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-3-2" class="outline-4">
<h4 id="sec-8-3-2"><span class="section-number-4">8.3.2</span> Mark a headline done when all its checkboxes are checked</h4>
<div class="outline-text-4" id="text-8-3-2">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-load 'org-list
  '(add-hook 'org-checkbox-statistics-hook (function brettw/checkbox-list-complete)))

(defun brettw/checkbox-list-complete ()
  (save-excursion
    (org-back-to-heading t)
    (let ((beg (point)) end)
      (end-of-line)
      (setq end (point))
      (goto-char beg)
      (if (re-search-forward "\\[\\([0-9]*%\\)\\]\\|\\[\\([0-9]*\\)/\\([0-9]*\\)\\]" end t)
            (if (match-end 1)
                (if (equal (match-string 1) "100%")
                    ;; all done - do the state change
                    (org-todo 'done)
                  (org-todo 'todo))
              (if (and (&gt; (match-end 2) (match-beginning 2))
                       (equal (match-string 2) (match-string 3)))
                  (org-todo 'done)
                (org-todo 'todo)))))))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-3-3" class="outline-4">
<h4 id="sec-8-3-3"><span class="section-number-4">8.3.3</span> Jump to journal</h4>
<div class="outline-text-4" id="text-8-3-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun brettw/jump-to-journal ()
  (interactive)
  (find-file brettw/org-journal-file)
)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-3-4" class="outline-4">
<h4 id="sec-8-3-4"><span class="section-number-4">8.3.4</span> Evaluate time range</h4>
<div class="outline-text-4" id="text-8-3-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun brettw/org-evaluate-time-range (&amp;optional to-buffer)
  (interactive)
  (if (org-at-date-range-p t)
      (org-evaluate-time-range to-buffer)
    (let ((headline (buffer-substring (point-at-bol) (point-at-eol))))
      (with-temp-buffer
        (insert headline)
        (goto-char (point-at-bol))
        (re-search-forward org-ts-regexp (point-at-eol) t)
        (if (not (org-at-timestamp-p t))
            (error "No timestamp here"))
        (goto-char (match-beginning 0))
        (org-insert-time-stamp (current-time) nil nil)
        (insert "--")
        (org-evaluate-time-range to-buffer)))))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-8-4" class="outline-3">
<h3 id="sec-8-4"><span class="section-number-3">8.4</span> Files and directories</h3>
<div class="outline-text-3" id="text-8-4">
<p>
We typically work out of the <code>~/org/</code> directory for the universal stuff.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-directory "~/org")
(setq brettw/org-journal-file "~/org/journal.org")
(setq org-agenda-files (list "~/org/" "~/"))
(setq org-default-notes-file (concat org-directory "/notes.org"))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-5" class="outline-3">
<h3 id="sec-8-5"><span class="section-number-3">8.5</span> Global keyboard shortcuts</h3>
<div class="outline-text-3" id="text-8-5">
<p>
So <code>org-mode</code> can be accessed from anywhere!
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(global-set-key (kbd "\C-c l") 'org-store-link)
(global-set-key (kbd "\C-c a") 'org-agenda)
(global-set-key (kbd "\C-c b") 'org-iswitchb)
(global-set-key (kbd "\C-c c") 'org-capture)
(global-set-key (kbd "C-M-j") 'brettw/jump-to-journal)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-6" class="outline-3">
<h3 id="sec-8-6"><span class="section-number-3">8.6</span> Babel</h3>
<div class="outline-text-3" id="text-8-6">
</div><div id="outline-container-sec-8-6-1" class="outline-4">
<h4 id="sec-8-6-1"><span class="section-number-4">8.6.1</span> Languages</h4>
<div class="outline-text-4" id="text-8-6-1">
<p>
We'll usually only work on my favourite languages.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(org-babel-do-load-languages
 'org-babel-load-languages
 '(
   (C . t)
   (dot . t)
   (emacs-lisp . t)
   (latex . t)
   (python . t)
   )
)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-6-2" class="outline-4">
<h4 id="sec-8-6-2"><span class="section-number-4">8.6.2</span> Settings</h4>
<div class="outline-text-4" id="text-8-6-2">
<p>
I'd prefer zero indentation.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-edit-src-content-indentation 0)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-8-7" class="outline-3">
<h3 id="sec-8-7"><span class="section-number-3">8.7</span> Hyperlinks</h3>
<div class="outline-text-3" id="text-8-7">
</div><div id="outline-container-sec-8-7-1" class="outline-4">
<h4 id="sec-8-7-1"><span class="section-number-4">8.7.1</span> Settings</h4>
<div class="outline-text-4" id="text-8-7-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-return-follows-link t
      org-tab-follows-link t)

(setq org-link-frame-setup '((vm . vm-visit-folder-other-frame)
                             (vm-imap . vm-visit-imap-folder-other-frame)
                             (gnus . org-gnus-no-new-news)
                             (file . find-file)
                             (wl . wl-other-frame))
)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-7-2" class="outline-4">
<h4 id="sec-8-7-2"><a id="ID-23a1353e-326a-49d3-93d3-8f2a127d5871" name="ID-23a1353e-326a-49d3-93d3-8f2a127d5871"></a><span class="section-number-4">8.7.2</span> Quicklinks</h4>
<div class="outline-text-4" id="text-8-7-2">

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-link-abbrev-alist
      '(
        ("wikipedia" . "http://en.wikipedia.org/index.php?search=%h")
        ("contact" . "file:~/org/contacts.org::%s")
        )
)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-8-8" class="outline-3">
<h3 id="sec-8-8"><span class="section-number-3">8.8</span> Contacts</h3>
<div class="outline-text-3" id="text-8-8">
<div class="org-src-container">

<pre class="src src-emacs-lisp">;  (require 'org-contacts)
;  (add-to-list 'org-contacts-files (expand-file-name "~/org/contacts.org"))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-9" class="outline-3">
<h3 id="sec-8-9"><span class="section-number-3">8.9</span> Agenda</h3>
<div class="outline-text-3" id="text-8-9">
</div><div id="outline-container-sec-8-9-1" class="outline-4">
<h4 id="sec-8-9-1"><span class="section-number-4">8.9.1</span> Settings</h4>
<div class="outline-text-4" id="text-8-9-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-agenda-skip-unavailable-files t
      org-include-diary t
      org-agenda-align-tags-to-column -100
      org-agenda-skip-additional-timestamps-same-entry nil
      org-agenda-skip-scheduled-if-done t
)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-9-2" class="outline-4">
<h4 id="sec-8-9-2"><span class="section-number-4">8.9.2</span> On load up</h4>
<div class="outline-text-4" id="text-8-9-2">
<p>
Show the agenda straight after Emacs initialization.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'after-init-hook 'org-agenda-to-appt)
(add-hook 'after-init-hook 'org-agenda-list)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-8-10" class="outline-3">
<h3 id="sec-8-10"><span class="section-number-3">8.10</span> To-do</h3>
<div class="outline-text-3" id="text-8-10">
</div><div id="outline-container-sec-8-10-1" class="outline-4">
<h4 id="sec-8-10-1"><span class="section-number-4">8.10.1</span> Settings</h4>
<div class="outline-text-4" id="text-8-10-1">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-enforce-todo-checkbox-dependencies t
      org-enforce-todo-dependencies t
      org-log-done t)
</pre>
</div>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-todo-keywords (list "TODO(t)" "STARTED(s)" "WAITING(w!)" "|" "DONE(d)" "CANCELLED(c@)"))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-8-11" class="outline-3">
<h3 id="sec-8-11"><span class="section-number-3">8.11</span> <code>org2blog</code></h3>
<div class="outline-text-3" id="text-8-11">
<p>
Make sure we autoload the required stuff.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(require 'org2blog-autoloads)
</pre>
</div>
</div>

<div id="outline-container-sec-8-11-1" class="outline-4">
<h4 id="sec-8-11-1"><span class="section-number-4">8.11.1</span> Customization</h4>
<div class="outline-text-4" id="text-8-11-1">
<p>
We want to make sure before we post anything.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org2blog/wp-confirm-post t)
</pre>
</div>

<p>
I don't like how it strips newlines.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org2blog/wp-keep-new-lines t)
</pre>
</div>

<p>
Set the source code syntax.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org2blog/wp-use-sourcecode-shortcode t)
(setq org2blog/wp-sourcecode-default-params "")
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-8-12" class="outline-3">
<h3 id="sec-8-12"><span class="section-number-3">8.12</span> Capture</h3>
<div class="outline-text-3" id="text-8-12">
<p>
I capture bugs, todo and dev journal entries for my main project.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq org-capture-templates
      '(
        ("t" "To-Do" entry (file "~/org/todo.org")
         "* TODO %?%i %^g\nDEADLINE: %^t\n%t \n\n" :empty-lines 1)
        ("T" "TDA To-Do" entry (file "e:/Projects/theDayAfter/doc/org/todo.org")
         "* TODO %i%? :tda:\n%t\n" :empty-lines 1)
        ("B" "TDA Bug" entry (file "e:/Projects/theDayAfter/doc/org/bugs.org")
         "* TODO %i%? :tda:bug:\n%t\n\n" :empty-lines 1)
        ("J" "TDA Dev Journal" entry (file+datetree "e:/Projects/thedayafter/doc/org/devjournal.org")
         "* %i%? :tda:\n%t\n" :empty-lines 1)
        ("m" "Meeting" entry (file+datetree+prompt "~/org/meetings.org")
         "* %?\n %^T\n" :empty-lines 1)
        ("s" "Spark" entry (file "~/org/spark.org")
         "* %? %^g\n%u %i\n\n")
        )
)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-8-13" class="outline-3">
<h3 id="sec-8-13"><span class="section-number-3">8.13</span> Hooks</h3>
<div class="outline-text-3" id="text-8-13">
<p>
Global org hooks
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">  (defun brettw/my-org-mode-hook ()
    (local-set-key (kbd "\M-n") 'outline-next-visible-heading)
    (local-set-key (kbd "\M-p") 'outline-previous-visible-heading)
    (visual-line-mode)
  )

(add-hook 'org-mode-hook 'brettw/my-org-mode-hook)
</pre>
</div>

<p>
Specific org-list hooks:
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(eval-after-load 'org-list
  '(add-hook 'org-checkbox-statistics-hook (function brettw/checkbox-list-complete)))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9"><span class="section-number-2">9</span> Programming</h2>
<div class="outline-text-2" id="text-9">
</div><div id="outline-container-sec-9-1" class="outline-3">
<h3 id="sec-9-1"><span class="section-number-3">9.1</span> General options</h3>
<div class="outline-text-3" id="text-9-1">
</div><div id="outline-container-sec-9-1-1" class="outline-4">
<h4 id="sec-9-1-1"><span class="section-number-4">9.1.1</span> CEDET</h4>
<div class="outline-text-4" id="text-9-1-1">
<p>
Basic CEDET setup (based on the new 23.2+ merged CEDET/Emacs setup).
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(require 'cedet)
(require 'semantic/sb)
(semantic-mode 1)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-9-1-2" class="outline-4">
<h4 id="sec-9-1-2"><span class="section-number-4">9.1.2</span> Tabs and indents</h4>
<div class="outline-text-4" id="text-9-1-2">
<p>
Tab width is always, always, always 4, and indents are only spaces.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq tab-width 4)
(set-default 'indent-tabs-mode nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-9-1-3" class="outline-4">
<h4 id="sec-9-1-3"><span class="section-number-4">9.1.3</span> Compilation</h4>
<div class="outline-text-4" id="text-9-1-3">
<p>
When a compile finishes correctly, we automatically close the compilation window.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun compilation-exit-autoclose (status code msg)
  ;; If M-x compile exists with a 0
  (when (and (eq status 'exit) (zerop code))
    (bury-buffer)
    (delete-window (get-buffer-window (get-buffer "*compilation*"))))
  (cons msg code))

(setq compilation-exit-message-function 'compilation-exit-autoclose)

(setq compilation-scroll-output t)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-9-1-4" class="outline-4">
<h4 id="sec-9-1-4"><span class="section-number-4">9.1.4</span> Keys</h4>
<div class="outline-text-4" id="text-9-1-4">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'c-mode-common-hook '( lambda ()
                                 (local-set-key (kbd "&lt;S-f5&gt;") 'compile)
                                 (local-set-key (kbd "&lt;f5&gt;") 'recompile)
                                 (local-set-key (kbd "RET") 'reindent-then-newline-and-indent)
                                 (local-set-key (kbd "C-M-o") 'ff-find-other-file)
                                 (local-set-key (kbd "&lt;C-return&gt;") 'complete-symbol)
))

(add-hook 'python-mode-hook '( lambda ()
                                 (local-set-key (kbd "&lt;S-f5&gt;") 'compile)
                                 (local-set-key (kbd "&lt;f5&gt;") 'recompile)
                                 (local-set-key (kbd "RET") 'reindent-then-newline-and-indent)
                                 (local-set-key (kbd "s-o") 'ff-find-other-file)
                                 (local-set-key (kbd "&lt;C-return&gt;") 'complete-symbol)
))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-9-2" class="outline-3">
<h3 id="sec-9-2"><span class="section-number-3">9.2</span> Lisp</h3>
</div>
<div id="outline-container-sec-9-3" class="outline-3">
<h3 id="sec-9-3"><span class="section-number-3">9.3</span> HTML</h3>
<div class="outline-text-3" id="text-9-3">
<div class="org-src-container">

<pre class="src src-emacs-lisp">(require 'web-mode)
(add-to-list 'auto-mode-alist '("\\.html?\\'" . web-mode))
(add-to-list 'auto-mode-alist '("\\.php?\\'" . web-mode))
(defun brettw/web-mode-hook () 
  (local-set-key (kbd "RET") 'newline-and-indent)
)

(add-hook 'web-mode-hook 'brettw/web-mode-hook)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-9-4" class="outline-3">
<h3 id="sec-9-4"><span class="section-number-3">9.4</span> Python</h3>
<div class="outline-text-3" id="text-9-4">
</div><div id="outline-container-sec-9-4-1" class="outline-4">
<h4 id="sec-9-4-1"><span class="section-number-4">9.4.1</span> Filenames</h4>
<div class="outline-text-4" id="text-9-4-1">
<p>
Use python mode for SCons files.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq auto-mode-alist (cons '("SConstruct" . python-mode) auto-mode-alist))
(setq auto-mode-alist (cons '("SConscript" . python-mode) auto-mode-alist))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-9-4-2" class="outline-4">
<h4 id="sec-9-4-2"><span class="section-number-4">9.4.2</span> Hook</h4>
<div class="outline-text-4" id="text-9-4-2">
<p>
When we "compile" in Python, we typically mean to invoke SCons (because we are usually editing SCons files!)
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun brettw/my-python-hook ()
  (setq compile-command "scons.py -D")
  (local-set-key (kbd "RET") 'newline-and-indent)
)

(add-hook 'python-mode-hook 'brettw/my-python-hook)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-9-5" class="outline-3">
<h3 id="sec-9-5"><span class="section-number-3">9.5</span> C++</h3>
<div class="outline-text-3" id="text-9-5">
</div><div id="outline-container-sec-9-5-1" class="outline-4">
<h4 id="sec-9-5-1"><span class="section-number-4">9.5.1</span> Filenames</h4>
<div class="outline-text-4" id="text-9-5-1">
<p>
CUDA is C++, so make Emacs aware of it.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-to-list 'auto-mode-alist '("\\.cu\\'" . c++-mode))
(add-to-list 'auto-mode-alist '("\\.cuh\\'" . c++-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-9-5-2" class="outline-4">
<h4 id="sec-9-5-2"><span class="section-number-4">9.5.2</span> Style</h4>
<div class="outline-text-4" id="text-9-5-2">
<p>
This is my C/C++ style.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq c-basic-offset 4
      c-doc-comment-style (quote javadoc))

(defconst brettw/my-c-style
  '((c-tab-always-indent         . t)
    (c-hanging-braces-alist      . ((substatement-open after)
                                    (brace-list-open)))
    (c-hanging-colons-alist      . ((member-init-intro before)
                                    (inher-intro)
                                    (case-label after)
                                    (label after)
                                    (access-label after)))
    (c-cleanu-list               . (scope-operator
                                    empty-defun-braces
                                    defun-close-semi))
    (c-offsets-alist             . ((arglist-close . c-lineup-arglist)
                                    (substatement-open . 0)
                                    (case-label        . +)
                                    (block-open        . 0)
                                    (access-label      . -)
                                    (knr-argdecl-intro . -)))
    )
  "BEW C Programming Style")

(c-add-style "brettw" brettw/my-c-style)
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-9-5-3" class="outline-4">
<h4 id="sec-9-5-3"><span class="section-number-4">9.5.3</span> Hooks</h4>
<div class="outline-text-4" id="text-9-5-3">
<p>
Set a bunch of my defaults.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(defun brettw/my-c-mode-common-hook ()
  (global-set-key (kbd "&lt;M-return&gt;") 'semantic-ia-complete-symbol)
  (c-set-style "brettw")
  (setq compile-command "scons.py -D")
  )

(add-hook 'c-mode-common-hook 'brettw/my-c-mode-common-hook)
(add-hook 'c++-mode-hook 'brettw/my-c-mode-common-hook)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-9-6" class="outline-3">
<h3 id="sec-9-6"><span class="section-number-3">9.6</span> Projects</h3>
<div class="outline-text-3" id="text-9-6">
<p>
I put project-specific settings here (especially <code>semantic-add-system-include</code> settings)
</p>
</div>
</div>
</div>
<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10"><span class="section-number-2">10</span> Utilities</h2>
<div class="outline-text-2" id="text-10">
</div><div id="outline-container-sec-10-1" class="outline-3">
<h3 id="sec-10-1"><span class="section-number-3">10.1</span> Twitter</h3>
<div class="outline-text-3" id="text-10-1">
<p>
<code>twittering-mode</code> is pretty awesome. That'll keep.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(setq twittering-use-master-password t)
(setq twittering-icon-mode t)
(setq twittering-timer-interval 300)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-10-2" class="outline-3">
<h3 id="sec-10-2"><span class="section-number-3">10.2</span> Webjump</h3>
<div class="outline-text-3" id="text-10-2">
<p>
Webjump is neat and gives us very quick access to search.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(require 'webjump)

(global-set-key '[f2] 'webjump)
(setq webjump-sites '(
                      ("Urban Dictionary" .
                       [simple-query "www.urbandictionary.com"
                                     "http://www.urbandictionary.com/define.php?term=" ""])
                      ("Reddit Search" .
                       [simple-query "www.reddit.com"
                                     "http://www.reddit.com/search?q=" ""])
                      ("Google Image Search" .
                       [simple-query "images.google.com" "images.google.com/images?hl=en&amp;q=" ""])
                      ("Google" .
                       [simple-query "google.com" "www.google.com.au/search?q=" ""])
                      ("StackOverflow" .
                       [simple-query "stackoverflow.com" "stackoverflow.com/search?q=" ""])

                      )

)
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Brett Witty</p>
<p class="date">Created: 2014-03-04 Tue 22:19</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.3.1 (<a href="http://orgmode.org">Org</a> mode 8.2.5h)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
